System.register(["jimu-core","jimu-ui","jimu-arcgis","jimu-theme"],(function(e,t){var l={},n={},i={},o={};return{setters:[function(e){l.BaseVersionManager=e.BaseVersionManager,l.Immutable=e.Immutable,l.React=e.React,l.ReactRedux=e.ReactRedux,l.UtilityManager=e.UtilityManager,l.appActions=e.appActions,l.classNames=e.classNames,l.css=e.css,l.defaultMessages=e.defaultMessages,l.esri=e.esri,l.hooks=e.hooks,l.jsx=e.jsx,l.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules,l.lodash=e.lodash,l.moduleLoader=e.moduleLoader,l.polished=e.polished},function(e){n.Badge=e.Badge,n.Button=e.Button,n.Checkbox=e.Checkbox,n.Icon=e.Icon,n.Nav=e.Nav,n.NavItem=e.NavItem,n.NavLink=e.NavLink,n.Navbar=e.Navbar,n.NumericInput=e.NumericInput,n.Option=e.Option,n.Popper=e.Popper,n.Radio=e.Radio,n.SVG=e.SVG,n.Select=e.Select,n.TextInput=e.TextInput,n.WidgetPlaceholder=e.WidgetPlaceholder,n.defaultMessages=e.defaultMessages,n.getFallbackPlacementsModifier=e.getFallbackPlacementsModifier},function(e){i.JimuMapViewComponent=e.JimuMapViewComponent,i.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){o.getThemeColorValue=e.getThemeColorValue}],execute:function(){e((()=>{var e={60171:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#C5C5C5" fill-rule="evenodd" d="M2.4.8V4h-.8A1.6 1.6 0 0 0 0 5.6v3.2a1.6 1.6 0 0 0 1.136 1.532c.249.075.464-.143.464-.403 0-.182-.154-.323-.32-.396A.8.8 0 0 1 .8 8.8V5.6a.8.8 0 0 1 .8-.8h12.8a.8.8 0 0 1 .8.8v3.2a.8.8 0 0 1-.48.733c-.166.073-.32.214-.32.396 0 .26.215.478.464.403A1.6 1.6 0 0 0 16 8.8V5.6A1.6 1.6 0 0 0 14.4 4h-.8V.8a.8.8 0 0 0-.8-.8H3.2a.8.8 0 0 0-.8.8Zm10.4 0H3.2V4h9.6V.8Z" clip-rule="evenodd"></path><path fill="#C5C5C5" d="M5.2 10.4a.4.4 0 0 0 0 .8h5.6a.4.4 0 0 0 0-.8H5.2ZM5.2 12.8a.4.4 0 0 0 0 .8h3.2a.4.4 0 0 0 0-.8H5.2Z"></path><path fill="#C5C5C5" fill-rule="evenodd" d="M2.4 15.2V8.8H2A.4.4 0 0 1 2 8h12a.4.4 0 0 1 0 .8h-.4v6.4a.8.8 0 0 1-.8.8H3.2a.8.8 0 0 1-.8-.8Zm10.4-6.4v6.4H3.2V8.8h9.6Z" clip-rule="evenodd"></path><path fill="#C5C5C5" d="M12 6c0-.22.18-.4.4-.4h.8a.4.4 0 0 1 0 .8h-.8A.4.4 0 0 1 12 6Z"></path></svg>'},51513:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12"><path fill="#000" fill-rule="evenodd" d="M10.167 0H1.833A.845.845 0 0 0 1 .857v10.286c0 .473.373.857.833.857h8.334c.46 0 .833-.384.833-.857V.857A.845.845 0 0 0 10.167 0ZM2 11V1h8v10H2Zm1.6-8h4.8c.331 0 .6.224.6.5s-.269.5-.6.5H3.6c-.331 0-.6-.224-.6-.5s.269-.5.6-.5Zm4.8 3H3.6c-.331 0-.6.224-.6.5s.269.5.6.5h4.8c.331 0 .6-.224.6-.5S8.731 6 8.4 6Z" clip-rule="evenodd"></path></svg>'},59788:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .538.538 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.538.538 0 0 1 0-.738Z" clip-rule="evenodd"></path></svg>'},96009:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .538.538 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.538.538 0 0 1 0 .738Z" clip-rule="evenodd"></path></svg>'},55339:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z"></path></svg>'},27218:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8Z"></path></svg>'},94539:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M4 4.796 4.796 4 8.02 7.224l3.184-3.184.796.796L8.816 8.02l3.144 3.144-.796.796L8.02 8.816 4.836 12l-.796-.796L7.224 8.02 4 4.796Z"></path><path fill="#000" fill-rule="evenodd" d="m0 4 4-4h8l4 4v8l-4 4H4l-4-4V4Zm1 .414L4.414 1h7.172L15 4.414v7.172L11.586 15H4.414L1 11.586V4.414Z" clip-rule="evenodd"></path></svg>'},26826:e=>{"use strict";e.exports=i},48891:e=>{"use strict";e.exports=l},34796:e=>{"use strict";e.exports=o},30726:e=>{"use strict";e.exports=n}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var i=t[l]={exports:{}};return e[l](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var r={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(r),a.d(r,{__set_webpack_public_path__:()=>$e,default:()=>Fe});var e=a(48891),t=a(30726),l=a(26826);const n="CIMMarkerNorthArrow",i={color:"#000",size:"4px"};var o,s;!function(e){e.CurrentMapExtent="CURRENT MAP EXTENT",e.CurrentMapScale="CURRENT MAP SCALE",e.SetMapScale="SET MAP SCALE"}(o||(o={})),function(e){e.Point="POINT",e.Inch="INCH",e.Centimeter="CENTIMETER",e.Millimeter="MILLIMETER"}(s||(s={}));const u={layoutOptions:{customTextElements:[],hasAuthorText:!0,hasCopyrightText:!0,hasLegend:!0,hasTitleText:!0},mapSurroundInfos:[],pageSize:null,pageUnits:null,webMapFrameSize:null},d={scalePreserved:!1,outScale:36978595.474472,layoutOptions:{titleText:"ArcGIS Web Map"},exportOptions:{dpi:96},printExtentType:o.CurrentMapExtent,attributionVisible:!1,forceFeatureAttributes:!0,wkid:102100,wkidLabel:"WGS_1984_Web_Mercator_Auxiliary_Sphere",enableTitle:!0,legendEnabled:!0,enableMapPrintExtents:!0,enableOutputSpatialReference:!0,enableQuality:!0,enableFeatureAttribution:!0,enableMapSize:!0,overrideCommonSetting:!1,enableAuthor:!0,enableCopyright:!0,enableLegend:!0,enableScalebarUnit:!0,enableCustomTextElements:!0};var c,v,p,m,h;!function(e){e.Classic="CLASSIC",e.Compact="COMPACT"}(c||(c={})),function(e){e.OrganizationService="ORGANIZATION SERVICE",e.Customize="CUSTOMIZE"}(v||(v={})),function(e){e.OrganizationTemplate="ORGANIZATION TEMPLATE",e.Customize="CUSTOMIZE"}(p||(p={})),function(e){e.Loading="LOADING",e.Success="SUCCESS",e.Error="ERROR"}(m||(m={})),function(e){e.PrintTemplate="PRINT TEMPLATE",e.PrintResult="PRINT RESULT"}(h||(h={}));var x=a(60171),f=a.n(x);const g={_widgetLabel:"Print",printPleaceholder:"Select or switch to a webmap to enable print.",chooseMapTip:"Please select a map with 2D data.",chooseUseUtility:"Please select utility.",printTemplate:"Print template",printResult:"Print result",previewPrint:"Preview print extents",fileFormat:"File format",mapPrintingExtents:"Map printing extents",outputSpatialReference:"Output spatial reference",printQuality:"Print quality",featureAttribution:"Feature attribution",selectEditableSettings:"Select editable settings",currentMapExtent:"Current map extent",currentMapScale:"Current map scale",setMapScale:"Set map scale",useCurrentScale:"Use current scale",wellKnownId:"Enter a well-known ID ({wkid})",allowEditing:"Select settings that allow editing at runtime",includeAttribution:"Include attribution",includeAttributes:"Include attributes",includeLegend:"Include legend",templateConfiguration:"Template configuration",templateName:"Template name",printLayout:"Layout",MapOnlyOptions:"Map-only options",LayoutOptions:"Layout options",mapSize:"Map size",spatialReference:"Output spatial reference {WKID}",printAuyhor:"Author",printCopyright:"Copyright",scaleBarUnit:"Scalebar unit",mapAttribution:"Map attribution",resultEmptyMessage:"Your printed files will appear here.",northArrow:"North arrow",includeNorthArrow:"Include north arrow"};var b,y=function(e,t,l,n){return new(l||(l=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function r(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))};!function(e){e.AsynchronousSubmit="esriExecutionTypeAsynchronous",e.SynchronousExecute="esriExecutionTypeSynchronous"}(b||(b={}));const w=(t,l)=>{let n=l;return(null==t?void 0:t.exportOptions)&&(n=n.set("exportOptions",Object.assign(Object.assign({},t.exportOptions||{}),(null==l?void 0:l.exportOptions)||{}))),(null==t?void 0:t.layoutOptions)&&(null==l?void 0:l.layoutOptions)&&(n=n.set("layoutOptions",Object.assign(Object.assign({},(null==t?void 0:t.layoutOptions)||{}),(null==l?void 0:l.layoutOptions)||{}))),(0,e.Immutable)(Object.assign(Object.assign({},t),n))},j=(e,t)=>{let l;return null==e||e.forEach(((e,n)=>{(null==e?void 0:e.templateId)===t&&(l=n)})),l},O=e=>"map-only"===(e=>{var t,l;return null===(l=null===(t=null==e?void 0:e.replace(/\_/gi,"-"))||void 0===t?void 0:t.replace(/\s+/gi,"-"))||void 0===l?void 0:l.toLowerCase()})(e),S=(e,t)=>{let l=!1;return null==e||e.forEach((e=>{(null==e?void 0:e.templateId)===t&&(l=!0)})),l},N=t=>y(void 0,void 0,void 0,(function*(){return e.UtilityManager.getInstance().getUrlOfUseUtility(t).then((e=>Promise.resolve(e)))}));function I(t){return y(this,void 0,void 0,(function*(){return(0,e.loadArcGISJSAPIModules)(["esri/rest/support/LegendLayer"]).then((e=>{var l,n,i;const[o]=e,a=T((null===(i=null===(n=null===(l=null==t?void 0:t.view)||void 0===l?void 0:l.map)||void 0===n?void 0:n.layers)||void 0===i?void 0:i.toArray())||[],o);return Promise.resolve(a)}))}))}function T(e,t){if(!e)return[];let l=[];return null==e||e.forEach((e=>{var n;const i=(null==e?void 0:e.effect)&&(null==e?void 0:e.effect.length)>0;if("graphics"!==e.type&&e.visible&&(null==e?void 0:e.legendEnabled)&&!i){const i=(null==e?void 0:e.subLayerIds)||null;if("group"===(null==e?void 0:e.type)){const i=T((null===(n=null==e?void 0:e.layers)||void 0===n?void 0:n._items)||[],t)||[];l=l.concat(i)}const o=new t({layerId:null==e?void 0:e.id,title:null==e?void 0:e.title,subLayerIds:i});l.push(o)}})),l}function M(e={}){var t;let l=null;for(const i in e)(null===(t=null==e?void 0:e[i])||void 0===t?void 0:t.type)===n&&(l=i);return l}var C=a(59788),P=a.n(C);const k=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:P()},i)):e.React.createElement("svg",Object.assign({className:o},i))};var E=a(96009),L=a.n(E);const A=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:L()},i)):e.React.createElement("svg",Object.assign({className:o},i))};var R=a(27218),z=a.n(R);const V=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:z()},i)):e.React.createElement("svg",Object.assign({className:o},i))},U=t=>{const{label:l,className:n,children:i,flowWrap:o}=t,a=e.css`
    .title {
      font-size: 14px;
    }
  `;return(0,e.jsx)("div",{className:(0,e.classNames)("mb-2 align-items-center",{className:n,"d-flex":!o}),css:a},(0,e.jsx)("div",{className:(0,e.classNames)("title flex-grow-1",{"mb-2":o})},l),i)};const F=(e,t)=>{let l=1,n=e;return t.forEach((i=>{n===(null==i?void 0:i.title)&&(n=`${e} (${l})`,l++,F(n,t))})),n},$=e=>{const t=(e=>{var t;return e?null===(t=null==e?void 0:e.asMutable())||void 0===t?void 0:t.map((e=>e.resultId)):[]})(e);return t&&0!==(null==t?void 0:t.length)?`config_${B(t)+1}`:"result_0"},B=e=>{var t;if(!e||0===(null==e?void 0:e.length))return 0;const l=null==e?void 0:e.map((e=>{var t;const l=null===(t=null==e?void 0:e.split("_"))||void 0===t?void 0:t.pop();return l?Number(l):0}));return null===(t=null==l?void 0:l.sort(((e,t)=>t-e)))||void 0===t?void 0:t[0]};function _(e,t){return"print-extents-layer-"+e+"-"+t}function W(e,t,l){var n,i,a,r,s,u,d,c;return s=this,u=void 0,c=function*(){const s=!1===(null==e?void 0:e.hasTitleText),u=!1===(null==e?void 0:e.hasLegend);let d=e.without("enableTitle","enableAuthor","enableOutputSpatialReference","enableMapPrintExtents","enableQuality","enableMapSize","enableFeatureAttribution","enableCopyright","enableLegend","enableMapAttribution","enableCustomTextElements","hasAuthorText","hasCopyrightText","hasLegend","hasTitleText","selectedFormatList","mapFrameSize","mapFrameUnit","legendEnabled","templateId","printExtentType","customTextElementEnableList");switch(null==e?void 0:e.printExtentType){case o.CurrentMapExtent:d=d.set("scalePreserved",!1);break;case o.CurrentMapScale:d=d.set("outScale",null===(n=null==t?void 0:t.view)||void 0===n?void 0:n.scale).set("scalePreserved",!0);break;case o.SetMapScale:d=d.set("scalePreserved",!0)}let c=null==d?void 0:d.asMutable({deep:!0});return s&&(null===(i=null==c?void 0:c.layoutOptions)||void 0===i||delete i.titleText),u&&(null===(a=null==c?void 0:c.layoutOptions)||void 0===a||delete a.legendLayers),(null===(r=null==e?void 0:e.layoutOptions)||void 0===r?void 0:r.legendLayers)?c.layoutOptions.legendLayers=yield I(t):c.layoutOptions.legendLayers=[],c=function(e,t){var l;const n=(null===(l=e.layoutOptions)||void 0===l?void 0:l.customTextElements)||[];let i=!1;return n.forEach((e=>{e.date&&(i=!0)})),i||n.push({Date:(new Date).toLocaleString(t)}),e.layoutOptions.customTextElements=n,e}(c,l),Promise.resolve(c)},new((d=void 0)||(d=Promise))((function(e,t){function l(e){try{i(c.next(e))}catch(e){t(e)}}function n(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof d?i:new d((function(e){e(i)}))).then(l,n)}i((c=c.apply(s,u||[])).next())}))}function G(e,t,l){const n=(i=l)?{XDPI:i,YDPI:i}:function(){const e={XDPI:null,YDPI:null},t=window.screen;if(null==t?void 0:t.XDPI)e.XDPI=null==t?void 0:t.deviceXDPI,e.YDPI=null==t?void 0:t.deviceYDPI;else{const t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(t),e.XDPI=t.offsetWidth,e.YDPI=t.offsetHeight,t.parentNode.removeChild(t)}return e}();var i;return e/(t?n.XDPI:n.YDPI)*2.54/100}var D=a(34796);const{useState:J,useEffect:Z,useRef:H}=e.React,Q=l=>{var n,a,r,u;const{jimuMapView:d,id:c,selectedTemplate:v,className:p,config:m}=l,h=e.hooks.useTranslation(g,t.defaultMessages),x=H(null),f=H(null),b=H(null),y=H(null===(n=null==d?void 0:d.view)||void 0===n?void 0:n.extent),w=H(null===(a=null==d?void 0:d.view)||void 0===a?void 0:a.scale),j=e.css`
    .checkbox-con {
      color: var(--dark-800);
      font-size: ${e.polished.rem(14)};
      line-height: ${e.polished.rem(22)};
      margin: ${e.polished.rem(4)} 0 ${e.polished.rem(8)} 0;
    }
  `,[S,N]=J(!1),[I,T]=J(null===(r=null==d?void 0:d.view)||void 0===r?void 0:r.extent),[M,C]=J(null===(u=null==d?void 0:d.view)||void 0===u?void 0:u.scale);Z((()=>(b.current=e.lodash.debounce(E,400),(0,e.loadArcGISJSAPIModules)(["esri/layers/GraphicsLayer","esri/Graphic","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/Point","esri/geometry/support/WKIDUnitConversion"]).then((e=>{x.current=e})),B)),[]),Z((()=>{var e,t,l,n,i,o;const a=(null==v?void 0:v.templateId)!==(null===(e=f.current)||void 0===e?void 0:e.templateId),r=(null==v?void 0:v.printExtentType)!==(null===(t=f.current)||void 0===t?void 0:t.printExtentType),s=(null==v?void 0:v.outScale)!==(null===(l=f.current)||void 0===l?void 0:l.outScale),u=(null===(n=null==v?void 0:v.exportOptions)||void 0===n?void 0:n.dpi)!==(null===(o=null===(i=f.current)||void 0===i?void 0:i.exportOptions)||void 0===o?void 0:o.dpi),d=P();f.current=v,S&&(a||r||s||d||u)&&b.current()}),[v]),Z((()=>{S&&I&&b.current()}),[I,M,m.previewBackgroundColor,m.previewOutLine]),Z((()=>{var t,l;d?(k(),T((0,e.Immutable)(JSON.parse(JSON.stringify(null===(l=null===(t=null==d?void 0:d.view)||void 0===t?void 0:t.extent)||void 0===l?void 0:l.toJSON()))))):T(null)}),[d]);const P=()=>{var e,t,l,n,i,o;if(!O(null==v?void 0:v.layout))return!1;const a=(null===(e=null==v?void 0:v.exportOptions)||void 0===e?void 0:e.width)!==(null===(l=null===(t=f.current)||void 0===t?void 0:t.exportOptions)||void 0===l?void 0:l.width),r=(null===(n=null==v?void 0:v.exportOptions)||void 0===n?void 0:n.height)!==(null===(o=null===(i=f.current)||void 0===i?void 0:i.exportOptions)||void 0===o?void 0:o.height);return a||r},k=()=>{var t,l;null===(t=null==d?void 0:d.view)||void 0===t||t.watch("extent",(t=>{const l=JSON.parse(JSON.stringify(t.toJSON()));T((0,e.Immutable)(l)),y.current=t})),null===(l=null==d?void 0:d.view)||void 0===l||l.watch("scale",(e=>{C(e),w.current=e}))},E=e.hooks.useEventCallback((()=>{var e;const t=$(),l=x.current[1],n=(null==m?void 0:m.previewOutLine)||i,a=(null==m?void 0:m.previewBackgroundColor)||"rgba(0,216,237,0.3)",r=new l((null===(e=f.current)||void 0===e?void 0:e.printExtentType)===o.CurrentMapExtent?R():A(),{type:"simple-fill",color:L(a),outline:{color:L(n.color,1),width:n.size}});t.graphics.removeAll(),t.graphics.add(r)})),L=(t,l=.3)=>{if(!t)return null;let n;if(t.includes("var(")||t.includes("#")){const i=(0,D.getThemeColorValue)(t);n=e.polished.rgba(i,l)}if(t.includes("rgba")){const i=t.split("(")[1].split(")")[0].split(","),o=i[i.length-1];n=Number(o)>.6?e.polished.rgba(t,l):t}return n},A=()=>{var e,t,l,n,i;const{mapFrameSize:a,mapFrameUnit:r,layout:s}=null===(e=f.current)||void 0===e?void 0:e.asMutable({deep:!0}),u=F(),d=U(r),c=x.current[2],v=O(s),p=null===(t=null==y?void 0:y.current)||void 0===t?void 0:t.center,m=(null===(l=f.current)||void 0===l?void 0:l.printExtentType)===o.SetMapScale?null===(n=f.current)||void 0===n?void 0:n.outScale:w.current,h=v?V():{width:a[0],height:a[1]},g={x:v?1:d.x/(null==u?void 0:u.x),y:v?1:d.y/(null==u?void 0:u.y)},b={x:h.width,y:h.height},j=(null==p?void 0:p.x)-(null==b?void 0:b.x)/2*m*(null==g?void 0:g.x),S=(null==p?void 0:p.y)-(null==b?void 0:b.y)/2*m*(null==g?void 0:g.y),N=(null==p?void 0:p.x)+(null==b?void 0:b.x)/2*m*(null==g?void 0:g.x),I=(null==p?void 0:p.y)+(null==b?void 0:b.y)/2*m*(null==g?void 0:g.y),T=[[j,S],[j,I],[N,I],[N,S],[j,S]],M=new c({spatialReference:null===(i=null==y?void 0:y.current)||void 0===i?void 0:i.spatialReference});return M.addRing(T),M},R=()=>{var t,l,n,i,o,a;const r=x.current[3],{mapFrameSize:s,layout:u,exportOptions:c}=null===(t=f.current)||void 0===t?void 0:t.asMutable({deep:!0}),v=O(u),p=x.current[2];let m=(0,e.Immutable)(null===(l=y.current)||void 0===l?void 0:l.toJSON());const h=(null===(n=null==d?void 0:d.view)||void 0===n?void 0:n.width)/(null===(i=null==d?void 0:d.view)||void 0===i?void 0:i.height),g=v?(null==c?void 0:c.width)/(null==c?void 0:c.height):s[0]/s[1],b=(null==m?void 0:m.height)||(null===(o=null==d?void 0:d.view)||void 0===o?void 0:o.height),w=(null==m?void 0:m.width)||(null===(a=null==d?void 0:d.view)||void 0===a?void 0:a.width);if(h>g){const e=w/g,t=z(!1,e/b);m=m.set("height",e).set("ymin",null==t?void 0:t.mim).set("ymax",null==t?void 0:t.max)}else if(h<g){const e=b*g,t=z(!0,e/w);m=m.set("width",e).set("xmin",null==t?void 0:t.mim).set("xmax",null==t?void 0:t.max)}const j=new r({xmax:null==m?void 0:m.xmax,xmin:null==m?void 0:m.xmin,ymax:null==m?void 0:m.ymax,ymin:null==m?void 0:m.ymin,zmax:null==m?void 0:m.zmax,zmin:null==m?void 0:m.zmin,spatialReference:null==m?void 0:m.spatialReference});return p.fromExtent(j)},z=(e,t)=>{var l,n;const i=null===(l=y.current)||void 0===l?void 0:l.toJSON(),o=null===(n=null==y?void 0:y.current)||void 0===n?void 0:n.center,a=(e?(null==i?void 0:i.xmax)-(null==i?void 0:i.xmin):(null==i?void 0:i.ymax)-(null==i?void 0:i.ymin))*t;return{max:e?(null==o?void 0:o.x)+a/2:(null==o?void 0:o.y)+a/2,mim:e?(null==o?void 0:o.x)-a/2:(null==o?void 0:o.y)-a/2}},V=()=>{var e;const{exportOptions:t}=null===(e=f.current)||void 0===e?void 0:e.asMutable({deep:!0}),l=F();return{width:G(null==t?void 0:t.width,!0,null==t?void 0:t.dpi)*(null==l?void 0:l.x),height:G(null==t?void 0:t.height,!1,null==t?void 0:t.dpi)*(null==l?void 0:l.y)}},U=e=>{switch(null==e?void 0:e.toUpperCase()){case s.Centimeter:return{x:.01,y:.01};case s.Inch:return{x:.0254,y:.0254};case s.Millimeter:return{x:.001,y:.001};case s.Point:return{x:.0254/72,y:.0254/72};default:return{x:NaN,y:NaN}}},F=()=>{var e;const t=x.current[5];let l,n;const i=null===(e=null==y?void 0:y.current)||void 0===e?void 0:e.spatialReference;i&&(l=i.wkid,n=i.wkt);let o=null;if(l)o=t.values[t[l]];else if(n&&-1!==n.search(/^PROJCS/i)){const e=/UNIT\[([^\]]+)\]\]$/i.exec(n);e&&e[1]&&(o=parseFloat(e[1].split(",")[1]))}return{x:o,y:o}},$=()=>{var e;let t=null;const l=x.current[0],n=_(c,d.id);return(null===(e=d.view)||void 0===e?void 0:e.map)&&(t=d.view.map.findLayerById(n),t||(t=new l({id:n,listMode:"hide",title:n}),d.view.map.add(t))),t},B=()=>{var e,t;if(W()&&d.view||!v){const l=_(c,d.id),n=null===(t=null===(e=d.view)||void 0===e?void 0:e.map)||void 0===t?void 0:t.findLayerById(l);n&&n.graphics.removeAll()}},W=()=>!!O(null==v?void 0:v.layout)||!!(null==v?void 0:v.mapFrameSize);return(0,e.jsx)("div",{className:p,css:j},W()&&(0,e.jsx)("div",{title:h("previewPrint"),className:"d-flex w-100 align-items-center checkbox-con",onClick:()=>{N(!S),S?B():E()}},(0,e.jsx)(t.Checkbox,{title:h("previewPrint"),className:"lock-item-ratio","data-field":"mapSize",checked:S}),(0,e.jsx)("div",{className:"text-left ml-2 text-truncate"},h("previewPrint"))))};var K=function(e,t,l,n){return new(l||(l=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function r(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))};const X=new(0,e.esri.Sanitizer),{useState:q,useEffect:Y,useRef:ee}=e.React,te=l=>{var n,i,a,r,s,u,d,c;const v=e.hooks.useTranslation(g,t.defaultMessages,e.defaultMessages),p=ee(null),m=ee(null),x=ee(!1),f=e.css`
    padding-bottom: ${e.polished.rem(16)};
    padding-top: ${e.polished.rem(16)};
    .setting-con {
      overflow-y: auto;
      padding-left: ${e.polished.rem(16)};
      padding-right: ${e.polished.rem(16)};
    }
    .print-button-con {
      padding-left: ${e.polished.rem(16)};
      padding-right: ${e.polished.rem(16)};
    }
    .no-right-padding .jimu-interactive-node{
      padding-right: 0;
    }
    .scalebar-unit {
      width: ${e.polished.rem(160)};
    }
    .collapse-button {
      padding-right: 0;
    }
    .map-size-con input {
      width: 100%;
    }
    .wkid-describtion {
      font-size: ${e.polished.rem(12)};
      color: var(--dark-400);
    }
    .wkid-describtion-invalid {
      color: var(--danger-700)
    }
    .outscale-con, .dpi-con {
      input {
        border-right: 0;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      }
      button {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        height: ${e.polished.rem(26)};
        svg {
          margin-right: 0;
        }
      }
    }
    .radio-con, .checkbox-con {
      color: var(--dark-800);
      font-size: ${e.polished.rem(14)};
      line-height: ${e.polished.rem(22)};
      margin: ${e.polished.rem(4)} 0 ${e.polished.rem(8)} 0;
    }
  `,{templateList:b,jimuMapView:y,selectedTemplate:w,id:S,config:N,confirmPrint:T,views:C,handleSelectedTemplateChange:P,setSelectedTemplateByIndex:E}=l,[L,R]=q((null===(n=null==w?void 0:w.layoutOptions)||void 0===n?void 0:n.titleText)||""),[z,F]=q((null==w?void 0:w.wkid)||""),[$,B]=q(null==w?void 0:w.outScale),[_,W]=q((null===(i=null==w?void 0:w.layoutOptions)||void 0===i?void 0:i.authorText)||""),[G,D]=q((null===(a=null==w?void 0:w.layoutOptions)||void 0===a?void 0:a.copyrightText)||""),[J,Z]=q(null===(r=null==w?void 0:w.layoutOptions)||void 0===r?void 0:r.customTextElements),[H,te]=e.React.useState(null===(s=null==w?void 0:w.exportOptions)||void 0===s?void 0:s.dpi),[le,ne]=e.React.useState(null===(u=null==w?void 0:w.exportOptions)||void 0===u?void 0:u.width),[ie,oe]=e.React.useState(null===(d=null==w?void 0:w.exportOptions)||void 0===d?void 0:d.height),[ae,re]=q(!1),[se,ue]=e.React.useState(null),[de,ce]=q(null),[ve,pe]=q(!1),[me,he]=q(!1);Y((()=>{var e,t,l,n,i,o,a,r,s,u,d,c,v,h;R((null===(e=null==w?void 0:w.layoutOptions)||void 0===e?void 0:e.titleText)||""),W((null===(t=null==w?void 0:w.layoutOptions)||void 0===t?void 0:t.authorText)||""),D((null===(l=null==w?void 0:w.layoutOptions)||void 0===l?void 0:l.copyrightText)||""),Z(null===(n=null==w?void 0:w.layoutOptions)||void 0===n?void 0:n.customTextElements),F(null==w?void 0:w.wkid),p.current=null==w?void 0:w.wkid,B(null==w?void 0:w.outScale),te(null===(i=null==w?void 0:w.exportOptions)||void 0===i?void 0:i.dpi),ne(null===(o=null==w?void 0:w.exportOptions)||void 0===o?void 0:o.width),oe(null===(a=null==w?void 0:w.exportOptions)||void 0===a?void 0:a.height),ce(M(null===(r=null==w?void 0:w.layoutOptions)||void 0===r?void 0:r.elementOverrides)),We(ae),pe(!!(null===(s=null==w?void 0:w.layoutOptions)||void 0===s?void 0:s.legendLayers)||(null===(d=null===(u=null==w?void 0:w.layoutOptions)||void 0===u?void 0:u.legendLayers)||void 0===d?void 0:d.length)>0),he(null===(h=null===(v=null===(c=null==w?void 0:w.layoutOptions)||void 0===c?void 0:c.elementOverrides)||void 0===v?void 0:v[de])||void 0===h?void 0:h.visible),(null==w?void 0:w.wkidLabel)?ue(null==w?void 0:w.wkidLabel):m.current&&xe(null==w?void 0:w.wkid).then((e=>{ue(e)}))}),[w]);const xe=t=>K(void 0,void 0,void 0,(function*(){if(x.current){const{getSRLabel:e}=m.current;return Promise.resolve(e(t))}return e.moduleLoader.loadModule("jimu-core/wkid").then((e=>{m.current=e,x.current=!0;const{getSRLabel:l}=m.current;return Promise.resolve(l(t))}))})),fe=t=>K(void 0,void 0,void 0,(function*(){if(x.current){const{isValidWkid:e}=m.current;return Promise.resolve(e(t))}return e.moduleLoader.loadModule("jimu-core/wkid").then((e=>{m.current=e,x.current=!0;const{isValidWkid:l}=m.current;return Promise.resolve(l(t))}))})),ge=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,n=j(null==b?void 0:b.asMutable({deep:!0}),l);E(n)},be=(e,t)=>{const l=w.setIn(e,t);P(l)},ye=()=>{be(["forceFeatureAttributes"],!(null==w?void 0:w.forceFeatureAttributes))},we=()=>{be(["attributionVisible"],!(null==w?void 0:w.attributionVisible))},je=e=>K(void 0,void 0,void 0,(function*(){const e=ve?null:yield I(y);be(["layoutOptions","legendLayers"],e),pe(!ve)})),Oe=()=>{var e,t,l;const n=null===(l=null===(t=null===(e=null==w?void 0:w.layoutOptions)||void 0===e?void 0:e.elementOverrides)||void 0===t?void 0:t[de])||void 0===l?void 0:l.visible;be(["layoutOptions","elementOverrides",de,"visible"],!n)},Se=e=>{be(["layoutOptions","titleText"],e)},Ne=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;R(l)},Ie=e=>K(void 0,void 0,void 0,(function*(){if(!(yield fe(e))){F(p.current);const e=yield xe(p.current);return ue(e),!1}p.current=e;const t=yield xe(e),l=w.set("wkid",e).set("wkidLabel",t);P(l)})),Te=e=>K(void 0,void 0,void 0,(function*(){if(yield fe(e)){const t=yield xe(e);ue(t)}else ue(v("invalidWKID"));F(e)})),Me=e=>{be(["outScale"],e)},Ce=()=>{var e;const t=null===(e=null==y?void 0:y.view)||void 0===e?void 0:e.scale;B(t),be(["outScale"],t)},Pe=e=>{B(e)},ke=e=>{be(["layoutOptions","authorText"],e)},Ee=e=>{if(e<1)return!1;te(parseInt(e))},Le=e=>{if(e<1)return!1;be(["exportOptions","dpi"],parseInt(e))},Ae=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;W(l)},Re=e=>{be(["layoutOptions","copyrightText"],e)},ze=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;D(l)},Ve=e=>{var t;if(!e||Number(e)<1)return ne(null===(t=null==w?void 0:w.exportOptions)||void 0===t?void 0:t.width),!1;be(["exportOptions","width"],e)},Ue=e=>{ne(e)},Fe=e=>{var t;if(!e||Number(e)<1)return oe(null===(t=null==w?void 0:w.exportOptions)||void 0===t?void 0:t.height),!1;be(["exportOptions","height"],e)},$e=e=>{oe(e)},Be=e=>{const t=e.target.value;be(["format"],t)},_e=e=>{const t=e.target.value;be(["layoutOptions","scalebarUnit"],t)},We=e=>{const t=Ze(),{showOutputSpatialReference:l}=t;e&&l&&!(null==w?void 0:w.wkidLabel)&&K(void 0,void 0,void 0,(function*(){const e=yield xe(null==w?void 0:w.wkid);ue(e)}))},Ge=()=>{We(!ae),re(!ae)},De=e=>{var t;if(e===o.SetMapScale){const l=null===(t=null==y?void 0:y.view)||void 0===t?void 0:t.scale;B(l),be(["outScale"],l);const n=w.set("outScale",l).set("printExtentType",e);P(n)}else be(["printExtentType"],e)},Je=e=>{if(m.current){const{isValidWkid:t}=m.current;return t(e)}return!0},Ze=()=>{const e=O(null==w?void 0:w.layout),t=(null==w?void 0:w.hasAuthorText)&&(null==w?void 0:w.enableAuthor)&&!e,l=(null==w?void 0:w.hasCopyrightText)&&(null==w?void 0:w.enableCopyright)&&!e,n=(null==w?void 0:w.hasLegend)&&(null==w?void 0:w.enableLegend)&&!e,i=He()&&!e;return{showLayoutOption:t||l||n||i||(null==w?void 0:w.enableScalebarUnit),showAuthor:t,showCopyright:l,showLegend:n,showCustomTextElements:i,showTitle:null==w?void 0:w.enableTitle,showFeatureAttribution:null==w?void 0:w.enableFeatureAttribution,showMapAttribution:(null==w?void 0:w.enableMapAttribution)&&e,showQuality:null==w?void 0:w.enableQuality,showMapSize:(null==w?void 0:w.enableMapSize)&&e,showMapPrintExtents:null==w?void 0:w.enableMapPrintExtents,showScalebarUnit:(null==w?void 0:w.enableScalebarUnit)&&!e,showOutputSpatialReference:null==w?void 0:w.enableOutputSpatialReference,showNorthArrow:null==w?void 0:w.enableNorthArrow}},He=()=>{var e,t;const l=[];return null===(e=null==w?void 0:w.customTextElementEnableList)||void 0===e||e.forEach((e=>{for(const t in e)l.push(e[t])})),(null===(t=null==l?void 0:l.filter((e=>e)))||void 0===t?void 0:t.length)>0},Qe=()=>{const l=[];return null==J||J.forEach(((n,i)=>{var o,a;for(const r in n){if(!(null===(a=null===(o=null==w?void 0:w.customTextElementEnableList)||void 0===o?void 0:o[i])||void 0===a?void 0:a[r]))continue;const s=(0,e.jsx)(U,{flowWrap:!0,className:"align-item-center",label:r,key:`${r}_${i}`},(0,e.jsx)(t.TextInput,{size:"sm",className:"flex-grow-1",value:n[r]||"",onAcceptValue:e=>{Ke(i,r,e)},onChange:e=>{Xe(i,r,e)},"aria-label":r}));l.push(s)}})),l},Ke=(e,t,l)=>{const n=J[e].set(t,l),i=null==J?void 0:J.asMutable({deep:!0});i.splice(e,1,n),be(["layoutOptions","customTextElements"],i)},Xe=(t,l,n)=>{var i;const o=null===(i=null==n?void 0:n.target)||void 0===i?void 0:i.value,a=J[t].set(l,o),r=null==J?void 0:J.asMutable({deep:!0});r.splice(t,1,a),Z((0,e.Immutable)(r))};return(0,e.jsx)("div",{className:(0,e.classNames)("w-100 h-100",{invisible:C!==h.PrintTemplate}),css:f},(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)("div",{className:"flex-grow-1 w-100 setting-con"},(0,e.jsx)("div",{className:"w-100 h-100"},(()=>{var l,n,i;const o=Ze(),{showTitle:a}=o;return(0,e.jsx)("div",{className:"base-setting-con"},a&&(0,e.jsx)(U,{flowWrap:!0,label:v("title")},(0,e.jsx)(t.TextInput,{size:"sm",className:"w-100",value:L,"aria-label":v("title"),onAcceptValue:Se,onChange:Ne})),(0,e.jsx)(U,{flowWrap:!0,label:v("template")},(0,e.jsx)(t.Select,{value:null==w?void 0:w.templateId,onChange:ge,size:"sm","aria-label":v("template")},null==b?void 0:b.map(((l,n)=>(0,e.jsx)(t.Option,{key:null==l?void 0:l.templateId,value:null==l?void 0:l.templateId,title:null==l?void 0:l.label},null==l?void 0:l.label))))),(null===(l=null==w?void 0:w.selectedFormatList)||void 0===l?void 0:l.length)>1&&(0,e.jsx)(U,{flowWrap:!0,label:v("fileFormat")},(0,e.jsx)(t.Select,{value:null===(n=null==w?void 0:w.format)||void 0===n?void 0:n.toLowerCase(),onChange:Be,size:"sm","aria-label":v("fileFormat")},null===(i=null==w?void 0:w.selectedFormatList)||void 0===i?void 0:i.map(((l,n)=>(0,e.jsx)(t.Option,{key:`format${n}`,value:l,title:l},l))))))})(),(0,e.jsx)("div",null,O(null==w?void 0:w.layout)&&(()=>{const l=Ze(),{showMapSize:n}=l;return(0,e.jsx)("div",null,n&&(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)("div",{className:"flex-grow-1"},(0,e.jsx)("div",{className:"mb-1"},v("width")),(0,e.jsx)(t.NumericInput,{size:"sm",className:"w-100 map-size-con",value:le,onAcceptValue:Ve,onChange:Ue,showHandlers:!1,"aria-label":v("width")})),(0,e.jsx)("div",{className:"flex-grow-1 ml-2"},(0,e.jsx)("div",{className:"mb-1"},v("height")),(0,e.jsx)(t.NumericInput,{size:"sm",className:"w-100 map-size-con",value:ie,onAcceptValue:Fe,onChange:$e,showHandlers:!1,"aria-label":v("height")}))))})(),(()=>{const l=O(null==w?void 0:w.layout),n=Ze(),{showLayoutOption:i,showFeatureAttribution:a,showMapAttribution:r,showQuality:s,showMapSize:u,showMapPrintExtents:d,showScalebarUnit:c,showOutputSpatialReference:p}=n,m=i||a||r||s||u||d||c||p;return(0,e.jsx)("div",null,m&&(0,e.jsx)("div",{className:"d-flex align-items-center",role:"group","aria-label":v("advance")},(0,e.jsx)("div",{className:"flex-grow-1"},v("advance")),(0,e.jsx)(t.Button,{className:"collapse-button",size:"sm",type:"tertiary",onClick:Ge,title:v(ae?"collapse":"expand")},ae?(0,e.jsx)(A,null):(0,e.jsx)(k,null))),ae&&(0,e.jsx)("div",null,d&&(0,e.jsx)(U,{flowWrap:!0,label:v("mapPrintingExtents")},(0,e.jsx)("div",{role:"group","aria-label":v("mapPrintingExtents")},(0,e.jsx)("div",{title:v("currentMapExtent"),className:"d-flex align-items-center radio-con mt-1 checkbox-con",onClick:()=>{De(o.CurrentMapExtent)}},(0,e.jsx)(t.Radio,{title:v("currentMapExtent"),checked:(null==w?void 0:w.printExtentType)===o.CurrentMapExtent,className:"mr-2"})," ",v("currentMapExtent")),(0,e.jsx)("div",{title:v("currentMapScale"),className:"d-flex align-items-center radio-con checkbox-con",onClick:()=>{De(o.CurrentMapScale)}},(0,e.jsx)(t.Radio,{title:v("currentMapScale"),checked:(null==w?void 0:w.printExtentType)===o.CurrentMapScale,className:"mr-2"})," ",v("currentMapScale")),(0,e.jsx)("div",{title:v("setMapScale"),className:"d-flex align-items-center radio-con checkbox-con",onClick:()=>{De(o.SetMapScale)}},(0,e.jsx)(t.Radio,{title:v("setMapScale"),checked:(null==w?void 0:w.printExtentType)===o.SetMapScale,className:"mr-2"})," ",v("setMapScale")),(null==w?void 0:w.printExtentType)===o.SetMapScale&&(0,e.jsx)("div",{className:"w-100 d-flex align-items-center outscale-con"},(0,e.jsx)(t.NumericInput,{size:"sm",className:"flex-grow-1 dpi-input no-right-padding",value:$,onAcceptValue:Me,onChange:Pe,showHandlers:!1,"aria-label":v("setMapScale")}),(0,e.jsx)(t.Button,{size:"sm",onClick:Ce,title:v("useCurrentScale")},(0,e.jsx)(V,null))))),p&&(0,e.jsx)(U,{flowWrap:!0,label:(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:X.sanitize(v("spatialReference",{WKID:'<a target="_blank" href="https://developers.arcgis.com/rest/services-reference/enterprise/using-spatial-references.htm">WKID</a>'}))}})},(0,e.jsx)(t.NumericInput,{size:"sm",className:"w-100 dpi-input no-right-padding",value:z,onAcceptValue:Ie,onChange:Te,showHandlers:!1,"aria-label":v("spatialReference",{WKID:""}),"aria-describedby":"print-wkid-describtion"}),(0,e.jsx)("div",{id:"print-wkid-describtion",title:se,"aria-label":se,className:(0,e.classNames)("text-truncate mt-1 wkid-describtion",{"wkid-describtion-invalid":!Je(Number(z))})},se)),!l&&(()=>{var l;const n=Ze(),{showAuthor:i,showCopyright:o,showLegend:a,showLayoutOption:r,showFeatureAttribution:s,showQuality:u,showScalebarUnit:d,showNorthArrow:c}=n;return(0,e.jsx)("div",{role:"group","aria-label":v("LayoutOptions")},r&&(0,e.jsx)("div",{className:"mb-2"},v("LayoutOptions")),i&&(0,e.jsx)(U,{flowWrap:!0,label:v("printAuyhor")},(0,e.jsx)(t.TextInput,{size:"sm",className:"w-100 dpi-input",value:_,onAcceptValue:ke,onChange:Ae,"aria-label":v("printAuyhor")})),o&&(0,e.jsx)(U,{flowWrap:!0,label:v("printCopyright")},(0,e.jsx)(t.TextInput,{size:"sm",className:"w-100 dpi-input",value:G,onAcceptValue:Re,onChange:ze,"aria-label":v("printCopyright")})),Qe(),a&&(0,e.jsx)(U,null,(0,e.jsx)("div",{title:v("includeLegend"),className:"w-100 align-items-center d-flex checkbox-con",onClick:je},(0,e.jsx)(t.Checkbox,{title:v("includeLegend"),className:"lock-item-ratio",checked:ve}),(0,e.jsx)("div",{className:"text-left ml-2 f-grow-1"},v("includeLegend")))),c&&(0,e.jsx)(U,null,(0,e.jsx)("div",{title:v("includeNorthArrow"),className:"w-100 align-items-center d-flex checkbox-con",onClick:Oe},(0,e.jsx)(t.Checkbox,{title:v("includeNorthArrow"),className:"lock-item-ratio",checked:me}),(0,e.jsx)("div",{className:"text-left ml-2 f-grow-1"},v("includeNorthArrow")))),d&&(0,e.jsx)(U,{label:v("scaleBarUnit"),flowWrap:!1},(0,e.jsx)(t.Select,{value:null===(l=null==w?void 0:w.layoutOptions)||void 0===l?void 0:l.scalebarUnit,onChange:_e,size:"sm",className:"scalebar-unit","aria-label":v("scaleBarUnit")},function(e){return[{value:"Miles",label:e("unitsLabelMiles")},{value:"Kilometers",label:e("unitsLabelKilometers")},{value:"Meters",label:e("unitsLabelMeters")},{value:"Feet",label:e("unitsLabelFeet")}]}(v).map(((l,n)=>(0,e.jsx)(t.Option,{key:`unit${n}`,value:l.value,title:l.label},l.label))))),u&&(0,e.jsx)(U,{label:v("printQuality"),flowWrap:!0},(0,e.jsx)("div",{className:"d-flex align-items-center w-100 dpi-con"},(0,e.jsx)(t.NumericInput,{size:"sm",className:"flex-grow-1 no-right-padding",value:H,min:1,onAcceptValue:Le,onChange:Ee,showHandlers:!1,"aria-label":v("printQuality")}),(0,e.jsx)(t.Button,{disabled:!0,size:"sm",title:"DPI"},"DPI"))),s&&(0,e.jsx)(U,null,(0,e.jsx)("div",{title:v("includeAttributes"),className:"w-100 align-items-center d-flex checkbox-con",onClick:ye},(0,e.jsx)(t.Checkbox,{title:v("includeAttributes"),className:"lock-item-ratio","data-field":"mapSize",checked:null==w?void 0:w.forceFeatureAttributes}),(0,e.jsx)("div",{className:"text-left ml-2 f-grow-1"},v("includeAttributes")))))})(),l&&(()=>{const l=Ze(),{showFeatureAttribution:n,showMapAttribution:i,showQuality:o}=l;return(0,e.jsx)("div",null,n&&(0,e.jsx)(U,{className:"mb-1"},(0,e.jsx)("div",{title:v("includeAttributes"),className:"w-100 align-items-center mt-1 d-flex checkbox-con",onClick:ye},(0,e.jsx)(t.Checkbox,{title:v("includeAttributes"),className:"lock-item-ratio","data-field":"mapSize",checked:null==w?void 0:w.forceFeatureAttributes}),(0,e.jsx)("div",{className:"text-left ml-2 f-grow-1"},v("includeAttributes")))),i&&(0,e.jsx)(U,null,(0,e.jsx)("div",{title:v("includeAttribution"),className:"w-100 align-items-center d-flex checkbox-con",onClick:we},(0,e.jsx)(t.Checkbox,{title:v("includeAttribution"),className:"lock-item-ratio","data-field":"mapSize",checked:null==w?void 0:w.attributionVisible}),(0,e.jsx)("div",{className:"text-left ml-2 f-grow-1"},v("includeAttribution")))),o&&(0,e.jsx)(U,{label:v("printQuality"),flowWrap:!0},(0,e.jsx)("div",{className:"d-flex align-items-center w-100 dpi-con"},(0,e.jsx)(t.NumericInput,{size:"sm",className:"flex-grow-1 no-right-padding",value:H,onAcceptValue:Le,onChange:Ee,showHandlers:!1,min:1,"aria-label":v("printQuality")}),(0,e.jsx)(t.Button,{disabled:!0,size:"sm",title:"DPI"},"DPI"))))})()))})()))),(0,e.jsx)("div",{className:"print-button-con"},(null==N?void 0:N.enablePreview)&&(0,e.jsx)(Q,{id:S,jimuMapView:y,className:"w-100",scale:$,selectedTemplate:w,scalebarUnit:null===(c=null==w?void 0:w.layoutOptions)||void 0===c?void 0:c.scalebarUnit,printExtentType:null==w?void 0:w.printExtentType,config:N}),(0,e.jsx)(t.Button,{className:"w-100 mt-2",type:"primary",onClick:()=>{T(w)}},v("_widgetLabel")))))};var le=a(55339),ne=a.n(le);const ie=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:ne()},i)):e.React.createElement("svg",Object.assign({className:o},i))};var oe=a(51513),ae=a.n(oe);const re=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:ae()},i)):e.React.createElement("svg",Object.assign({className:o},i))};var se=a(94539),ue=a.n(se);const de=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:ue()},i)):e.React.createElement("svg",Object.assign({className:o},i))},ce=l=>{const n=e.hooks.useTranslation(g,t.defaultMessages),i=e.css`
    & {
      overflow: auto;
      padding: ${e.polished.rem(16)} ${e.polished.rem(16)} ${e.polished.rem(16)} ${e.polished.rem(16)};
    }
    button {
      padding-left: 0;
      padding-right: 0;
    }
    a {
      padding: 0;
    }
    .print-loading-con {
      @keyframes loading {
        0% {transform: rotate(0deg); };
        100% {transform: rotate(360deg)};
      }
      width: ${e.polished.rem(16)};
      height: ${e.polished.rem(16)};
      border: 1px solid var(--dark-100);
      border-radius: 50%;
      border-top: 1px solid var(--dark-800);
      box-sizing: border-box;
      animation:loading 2s infinite linear;
      margin-right: ${e.polished.rem(4)};
    }
    .error-link, .error-link:hover {
      color: var(--dark);
      & svg {
        color: var(--danger-800);
      }
    }
  `,{printResultList:o,deleteResultItem:a}=l;return(0,e.jsx)("div",{className:"w-100 h-100",css:i},0===(null==o?void 0:o.length)&&(0,e.jsx)("div",null,n("resultEmptyMessage")),o.map(((l,i)=>(0,e.jsx)("div",{className:"d-flex align-items-center mb-2 w-100",key:null==l?void 0:l.resultId},(0,e.jsx)(t.Button,{href:null==l?void 0:l.url,disabled:!(null==l?void 0:l.url),target:"_blank",size:"sm","aria-label":null==l?void 0:l.title,title:(null==l?void 0:l.state)!==m.Error?null==l?void 0:l.title:"",type:"tertiary",className:(0,e.classNames)("flex-grow-1 d-flex align-items-center",{"error-link":(null==l?void 0:l.state)===m.Error})},(t=>{switch(t.state){case m.Loading:return(0,e.jsx)("div",{className:"print-loading-con"});case m.Success:return(0,e.jsx)(re,null);case m.Error:return(0,e.jsx)("span",{title:n("uploadImageError")},(0,e.jsx)(de,null))}})(l),(0,e.jsx)("div",{className:"ml-2",title:(null==l?void 0:l.state)===m.Error?null==l?void 0:l.title:""},null==l?void 0:l.title)),(0,e.jsx)(t.Button,{size:"sm",type:"tertiary",onClick:()=>{a(i)},title:n("remove")},(0,e.jsx)(ie,null))))))};const ve=e=>{return t=void 0,n=void 0,o=function*(){const{mapView:t,printTemplateProperties:n,useUtility:i}=e;return N(i).then((e=>(0,l.loadArcGISJSAPIModules)(["esri/rest/support/PrintParameters","esri/rest/support/PrintTemplate","esri/rest/print","esri/geometry/SpatialReference"]).then((l=>{var i;const[o,a,r,s]=l,u=new a(n),d=function(e){var t,l;return e.layerViews.items=null===(l=null===(t=null==e?void 0:e.layerViews)||void 0===t?void 0:t.items)||void 0===l?void 0:l.map((e=>{var t,l,n,i,o,a,r;return(null===(l=null===(t=null==e?void 0:e.layer)||void 0===t?void 0:t.id)||void 0===l?void 0:l.includes("jimu-draw-layer-"))||(null===(i=null===(n=null==e?void 0:e.layer)||void 0===n?void 0:n.id)||void 0===i?void 0:i.includes("bookmark-layer-"))?(e.graphicsView.graphics.items=null===(r=null===(a=null===(o=null==e?void 0:e.graphicsView)||void 0===o?void 0:o.graphics)||void 0===a?void 0:a.items)||void 0===r?void 0:r.map((e=>{var t;return(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.jimuDrawId)?(e.geometry.hasZ=!1,e):e})),e):e})),e}(t),c={view:d,template:u};n.wkid!==(null===(i=null==t?void 0:t.spatialReference)||void 0===i?void 0:i.wkid)&&(c.outSpatialReference=new s({wkid:n.wkid}));const v=new o(c);return r.execute(e,v).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e)))}))))},new((i=void 0)||(i=Promise))((function(e,l){function a(e){try{s(o.next(e))}catch(e){l(e)}}function r(e){try{s(o.throw(e))}catch(e){l(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof i?l:new i((function(e){e(l)}))).then(a,r)}s((o=o.apply(t,n||[])).next())}));var t,n,i,o};const{useState:pe,useRef:me,useEffect:he}=e.React,xe=l=>{const n=e.hooks.useTranslation(g,t.defaultMessages),i=me([]),o=me([]),a=me(null),r=e.css`
    .classic-setting-con {
      height: 0;
    }
    .nav-bar-con {
      height: ${e.polished.rem(40)};
      border: none !important;
      border-bottom: 1px solid var(--light-200) !important;
      padding: 0;
      .navbar-nav button.nav-link, .navbar-nav button.nav-link:hover, .navbar-nav button.nav-link:focus {
        color: var(--dark-800);
      }
      .jimu-nav-link-wrapper .jimu-badge-wrapper {
        & {
          display: block;
        }
        .badge-dot {
          top: ${e.polished.rem(4)};
          right: ${e.polished.rem(4)};
        }
      }
    }
  `,{config:s,jimuMapView:u,templateList:d,id:c,locale:v}=l,[p,x]=pe(h.PrintTemplate),[f,b]=pe((0,e.Immutable)([])),[y,O]=pe(null);he((()=>{C(0)}),[]),he((()=>{var t;if(y&&S(d,null==y?void 0:y.templateId)){const l=j(null==d?void 0:d.asMutable({deep:!0}),null==y?void 0:y.templateId),n=null===(t=P(null==d?void 0:d[l]))||void 0===t?void 0:t.asMutable({deep:!0});N(n),a.current=(0,e.Immutable)(n)}y&&S(d,null==y?void 0:y.templateId)||C(0)}),[d,s]);const N=t=>{var l;let n=null==y?void 0:y.asMutable({deep:!0});for(const e in n)e.includes("enable")&&delete n[e];const i=I(t,null===(l=a.current)||void 0===l?void 0:l.asMutable({deep:!0}));(null==i?void 0:i.length)>0&&i.forEach((l=>{var i;let o=t;l.forEach((e=>{o=o[e]})),n=null===(i=(0,e.Immutable)(n).setIn(l,o))||void 0===i?void 0:i.asMutable({deep:!0})})),n.customTextElementEnableList=null==t?void 0:t.customTextElementEnableList,n.selectedFormatList=null==t?void 0:t.selectedFormatList;const o=(0,e.Immutable)(Object.assign(Object.assign({},t),n));k(o)},I=(e,t)=>{const l=T(e,t);return M(l)},T=(e,t)=>{var l,n,i;if(!e||!t)return null;const o=[];for(const a in e){const r=e[a]instanceof Object;if(Array.isArray(e[a]))if(Array.isArray(t[a])&&(null===(l=e[a])||void 0===l?void 0:l.length)===(null===(n=null==t?void 0:t[a])||void 0===n?void 0:n.length)){const l=null===(i=e[a])||void 0===i?void 0:i.filter((e=>{var l;return!(null===(l=null==t?void 0:t[a])||void 0===l?void 0:l.includes(e))}));(null==l?void 0:l.length)>0&&o.push(a)}else o.push(a);else if(r){const l={},n=T(e[a],null==t?void 0:t[a]);l[a]=n,(null==n?void 0:n.length)>0&&o.push(l)}else(null==e?void 0:e[a])!==(null==t?void 0:t[a])&&o.push(a)}return o},M=(e,t)=>{let l=[];return null==e||e.forEach((n=>{const i=n instanceof Object,o=Array.isArray(n);let a=t||[];if(o)l=M(e,a);else if(i)Object.keys(n).forEach((e=>{a.push(e),a=M(n[e],a)})),l=a;else{const e=a.concat([n]);l.push(e)}})),l},C=e=>{if(0===(null==d?void 0:d.length))return!1;const t=P(null==d?void 0:d[e]);a.current=t,k(t)},P=t=>t?t=(null==t?void 0:t.overrideCommonSetting)?w((0,e.Immutable)(null==s?void 0:s.commonSetting),(0,e.Immutable)(t)):w((0,e.Immutable)(t),(0,e.Immutable)(null==s?void 0:s.commonSetting)):null,k=e=>{O(e)},E=t=>{x(t),t===h.PrintResult&&(o.current=(0,e.Immutable)(i.current).asMutable())},L=e=>{const t=_(c,u.id),l=u.view.map.findLayerById(t);l&&(l.visible=e)},A=(t,l,n)=>{let o;n&&(t.url=n),t.state=l;const a=i.current;a.forEach(((e,l)=>{e.resultId===t.resultId&&(o=l)})),(o||0===o)&&(a.splice(o,1,t),b((0,e.Immutable)(a)),i.current=a)};return(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column",css:r},(0,e.jsx)(t.Navbar,{className:"nav-bar-con w-100",border:!1,color:"false",light:!0},(0,e.jsx)(t.Nav,{className:"w-100 h-100",underline:!0,navbar:!0,justified:!0,fill:!0},(0,e.jsx)(t.NavItem,{title:n("printTemplate"),onClick:()=>{E(h.PrintTemplate)},className:"link-con"},(0,e.jsx)(t.NavLink,{tag:"button",active:p===h.PrintTemplate},n("printTemplate"))),(0,e.jsx)(t.NavItem,{title:n("printResult"),onClick:()=>{E(h.PrintResult)}},(0,e.jsx)(t.NavLink,{tag:"button",active:p===h.PrintResult},(0,e.jsx)(t.Badge,{className:"w-100 h-100",dot:!0,color:"primary",hideBadge:(null===(R=null==i?void 0:i.current)||void 0===R?void 0:R.length)===(null===(z=null==o?void 0:o.current)||void 0===z?void 0:z.length)},n("printResult")))))),(0,e.jsx)("div",{className:"flex-grow-1 w-100 classic-setting-con overflow-hidden"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100 h-100",{"sr-only":p!==h.PrintTemplate})},(0,e.jsx)(te,{id:c,config:s,jimuMapView:u,selectedTemplate:y,templateList:d,confirmPrint:t=>{return l=void 0,n=void 0,a=function*(){var l;const n={resultId:$((0,e.Immutable)(i.current)),url:null,title:F(null===(l=null==t?void 0:t.layoutOptions)||void 0===l?void 0:l.titleText,(0,e.Immutable)(i.current)),state:m.Loading},o=i.current;o.push(n),i.current=o,b((0,e.Immutable)(o)),L(!1),ve({useUtility:null==s?void 0:s.useUtility,mapView:null==u?void 0:u.view,printTemplateProperties:yield W(t,u,v)}).then((e=>{L(!0),A(n,m.Success,null==e?void 0:e.url)}),(e=>{L(!0),A(n,m.Error)}))},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{s(a.next(e))}catch(e){t(e)}}function r(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof o?l:new o((function(e){e(l)}))).then(i,r)}s((a=a.apply(l,n||[])).next())}));var l,n,o,a},views:p,handleSelectedTemplateChange:k,setSelectedTemplateByIndex:C})),p===h.PrintResult&&(0,e.jsx)(ce,{config:s,printResultList:f,deleteResultItem:t=>{var l,n;const a=i.current;a.splice(t,1),b((0,e.Immutable)(a)),i.current=null===(l=(0,e.Immutable)(a))||void 0===l?void 0:l.asMutable({deep:!0}),o.current=null===(n=(0,e.Immutable)(a))||void 0===n?void 0:n.asMutable({deep:!0})}})));var R,z};const fe=t=>{const l=window.SVG,{className:n}=t,i=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(l[n[i]]=e[n[i]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:o,src:f()},i)):e.React.createElement("svg",Object.assign({className:o},i))},ge=t=>{const l=e.css`
    &.print-loading-con {
      @keyframes loading {
        0% {transform: rotate(0deg); };
        100% {transform: rotate(360deg)};
      }
      width: ${e.polished.rem(16)};
      height: ${e.polished.rem(16)};
      border: 1px solid var(--dark-100);
      border-radius: 50%;
      border-top: 1px solid var(--dark-800);
      box-sizing: border-box;
      animation:loading 2s infinite linear;
      margin-right: ${e.polished.rem(4)};
    }
  `;return(0,e.jsx)("div",{css:l,className:"print-loading-con"})},be=l=>{const n=e.hooks.useTranslation(g,t.defaultMessages),{prinResult:i,restPrint:o}=l,a=e.css`
    .error-link, .error-link:hover {
      color: var(--dark);
      & svg {
        color: var(--danger-800);
      }
    }
  `;return(0,e.jsx)("div",{className:"d-flex flex-column h-100 w-100",css:a},(0,e.jsx)(t.Button,{href:null==i?void 0:i.url,disabled:!(null==i?void 0:i.url),target:"_blank",size:"sm","aria-label":null==i?void 0:i.title,title:null==i?void 0:i.title,type:"tertiary",className:(0,e.classNames)("d-flex align-items-center",{"error-link":(null==i?void 0:i.state)===m.Error})},(()=>{switch(null==i?void 0:i.state){case m.Loading:return(0,e.jsx)(ge,null);case m.Success:return(0,e.jsx)(re,null);case m.Error:return(0,e.jsx)("span",{title:n("uploadImageError")},(0,e.jsx)(de,null))}})(),(0,e.jsx)("div",{className:"ml-2"},null==i?void 0:i.title)),(0,e.jsx)("div",{className:"flex-grow-1 d-flex align-items-end"},(0,e.jsx)("div",{className:"flex-grow-1"}),(0,e.jsx)(t.Button,{type:"primary",onClick:o},n("reset"))))};const{useState:ye,useRef:we,useEffect:je}=e.React,{useSelector:Oe}=e.ReactRedux,Se=l=>{var n,i;const{config:o,templateList:a,jimuMapView:r,errorTip:s,id:u,locale:d}=l,c=e.hooks.useTranslation(g,t.defaultMessages),v=we(null),p=Oe((e=>{var t,l;return null===(l=null===(t=null==e?void 0:e.appConfig)||void 0===t?void 0:t.widgets)||void 0===l?void 0:l[u]})),h=e.css`
    .compact-con {
      padding: 0;
      svg {
        margin: 0 auto;
      }
      .compact-icon {
        color: ${null===(i=null===(n=null==p?void 0:p.icon)||void 0===n?void 0:n.properties)||void 0===i?void 0:i.color};
      }
    }
  `,x=e.css`
    & {
      padding: ${e.polished.rem(12)};
      width: ${e.polished.rem(320)};
      height: ${e.polished.rem(155)};
    }
    .close-con button{
      padding: 0;
    }
    .result-list-con button {
      padding: 0;
    }
    .compact-preview-con {
      width: 0;
    }
  `,f=[{name:"preventOverflow",options:{altAxis:!0}},(0,t.getFallbackPlacementsModifier)(["left-start","left-end"],!0)],[b,y]=ye(!1),[O,N]=ye(!1),[I,T]=ye(null),[M,C]=ye(null);je((()=>{P(0)}),[]),je((()=>{if(M&&S(a,null==M?void 0:M.templateId)||P(0),M&&S(a,null==M?void 0:M.templateId)){const e=j(null==a?void 0:a.asMutable({deep:!0}),null==M?void 0:M.templateId);P(e)}}),[a,o]);const P=e=>{if(0===(null==a?void 0:a.length))return!1;let t=null==a?void 0:a[e];t=(null==t?void 0:t.overrideCommonSetting)?w(null==o?void 0:o.commonSetting,t):w(t,null==o?void 0:o.commonSetting),C(t)},k=(e,t)=>{y("clickOutside"!==t&&!b)},E=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,n=j(null==a?void 0:a.asMutable({deep:!0}),l);P(n)},L=e=>{const t=_(u,r.id),l=r.view.map.findLayerById(t);l&&(l.visible=e)},A=()=>{return t=void 0,l=void 0,i=function*(){var t;const l={resultId:null==M?void 0:M.templateId,url:null,title:null===(t=null==M?void 0:M.layoutOptions)||void 0===t?void 0:t.titleText,state:m.Loading};T((0,e.Immutable)(l)),N(!O),L(!1),ve({useUtility:null==o?void 0:o.useUtility,mapView:null==r?void 0:r.view,printTemplateProperties:yield W(M,r,d)}).then((t=>{l.url=null==t?void 0:t.url,l.state=m.Success,L(!0),T((0,e.Immutable)(l))}),(t=>{L(!0),l.state=m.Error,T((0,e.Immutable)(l))}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function r(e){try{s(i.throw(e))}catch(e){o(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof n?l:new n((function(e){e(l)}))).then(a,r)}s((i=i.apply(t,l||[])).next())}));var t,l,n,i},R=()=>!r||!(null==o?void 0:o.useUtility);return(0,e.jsx)("div",{className:"w-100 h-100",css:h},(0,e.jsx)(t.Button,{className:"w-100 h-100 compact-con",type:"tertiary",ref:v,title:c("_widgetLabel"),onClick:k},(()=>{const l=null==p?void 0:p.icon;return l?"string"==typeof l?(0,e.jsx)(t.SVG,{src:l}):(0,e.jsx)(t.Icon,{className:"compact-icon",icon:null==l?void 0:l.svg}):(0,e.jsx)(fe,null)})()),(0,e.jsx)(t.Popper,{open:b,disableResize:!0,placement:"bottom",reference:v,modifiers:f,showArrow:!0,toggle:k,trapFocus:!1,autoFocus:!1,css:x},!R()&&(0,e.jsx)("div",{className:"d-flex flex-column w-100 h-100"},(0,e.jsx)("div",{className:"text-right close-con"},(0,e.jsx)(t.Button,{className:"print-button",type:"tertiary",title:c("closeTour"),onClick:k},(0,e.jsx)(ie,null))),(0,e.jsx)("div",{className:"flex-grow-1"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100 h-100",{"sr-only":O})},(()=>{var l;return(0,e.jsx)("div",{className:"d-flex flex-column"},(0,e.jsx)(U,{flowWrap:!0,className:"flex-grow-1",label:c("template")},(0,e.jsx)(t.Select,{value:null==M?void 0:M.templateId,onChange:E,size:"sm",className:"scalebar-unit","aria-label":c("template")},null==a?void 0:a.map(((l,n)=>(0,e.jsx)(t.Option,{key:l.templateId,value:l.templateId,title:l.label},l.label))))),(0,e.jsx)("div",{className:"print-button-con d-flex align-items-center mt-2"},(null==o?void 0:o.enablePreview)&&(0,e.jsx)(Q,{className:"flex-grow-1 compact-preview-con",id:u,config:o,jimuMapView:r,scale:null==M?void 0:M.outScale,selectedTemplate:M,scalebarUnit:null===(l=null==M?void 0:M.layoutOptions)||void 0===l?void 0:l.scalebarUnit,printExtentType:null==M?void 0:M.printExtentType}),(0,e.jsx)(t.Button,{className:"print-button text-truncate ml-1",type:"primary",onClick:A,title:c("_widgetLabel")},c("_widgetLabel"))))})()),O&&(0,e.jsx)(be,{prinResult:I,restPrint:()=>{T(null),N(!1)}}))),R()&&(0,e.jsx)("div",null,s)))};function Ne(t){const l={query:{f:"json"},responseType:"json"};return(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{const[n]=e;return n(t,l).then((e=>function(e){return t=this,l=void 0,i=function*(){let t=!1,l=!1;const n=(null==e?void 0:e.parameters)||[];let i=[],o=[],a="png32";return null==n||n.forEach((e=>{var n,r;if("Layout_Template"===e.name){const t=e.choiceList,l=e.defaultValue;t?i=null==t?void 0:t.map((e=>Ie(e))):i.push(Ie(l))}if("Format"===e.name){const t=null===(n=null==e?void 0:e.choiceList)||void 0===n?void 0:n.map((e=>null==e?void 0:e.toLowerCase()));a=null===(r=e.defaultValue)||void 0===r?void 0:r.toLowerCase(),o=t||[a]}"string"==typeof e.name&&"web_map_as_json"===e.name.toLowerCase()&&(t=!0),"string"==typeof e.name&&"output_file"===e.name.toLowerCase()&&(l=!0)})),Promise.resolve({templates:i,formatList:o,defaultFormat:a,hasWebmapParam:t,hasOutputParam:l})},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function r(e){try{s(i.throw(e))}catch(e){o(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof n?l:new n((function(e){e(l)}))).then(a,r)}s((i=i.apply(t,l||[])).next())}));var t,l,n,i}(null==e?void 0:e.data)))}))}function Ie(e){const t=O(e)?{}:{layoutOptions:{legend:!1}};return Object.assign({label:e,layout:e,format:"PNG32"},t)}const Te=(t,l,n)=>{const i=ke(null==l?void 0:l.utilityId);return Ne(t).then((o=>{let a=n;const r=(null==o?void 0:o.templates)?((t,l,n)=>((e,t,l)=>{const n=((e,t)=>e===v.Customize||t===p.Customize?"custom":"org")(t,l);return e.map(((e,t)=>(e.templateId=`config_${n}_${t}`,e)))})(t.map((t=>{var l;let n=(0,e.Immutable)(t);return n=n.set("layout",null==t?void 0:t.layout),n=n.setIn(["layoutOptions","scalebarUnit"],"Miles").setIn(["layoutOptions","legendLayers"],null),O(null==n?void 0:n.layout)&&(n=n.set("exportOptions",Object.assign({width:800,height:1100},null==t?void 0:t.exportOptions))),null===(l=w((0,e.Immutable)(d),(0,e.Immutable)(n)))||void 0===l?void 0:l.asMutable({deep:!0})})),l,n))(null==o?void 0:o.templates,i,null==n?void 0:n.printTemplateType):[],s=null==r?void 0:r.map((e=>{var t;return(null==e?void 0:e.layout)&&(e.layout=null==e?void 0:e.layout),(null==e?void 0:e.format)&&(e.format=null===(t=null==e?void 0:e.format)||void 0===t?void 0:t.toLowerCase()),e}));return function(t){const l={query:{"env:outSR":"","env:processSR":"",returnZ:!1,returnM:!1,returnTrueCurves:!1,returnFeatureCollection:!1,context:"",f:"json"},responseType:"json"};return function(t){var l;if(!t)return Promise.resolve(null);const n=`${null===(l=t.split("/GPServer"))||void 0===l?void 0:l[0]}/GPServer`,i={query:{f:"json"},responseType:"json"};return(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{const[t]=e;return t(n,i).then((e=>{var t,l;const i=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.tasks,o=null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.executionType,a=o===b.SynchronousExecute?"execute":"submitJob";let r=null,s=null;return null==i||i.forEach((e=>{(null==e?void 0:e.includes("Templates"))&&(r=`${n}/${e}`,s=`${n}/${e}/${a}`)})),Promise.resolve({templatesInfoTaskUrl:r,url:s,executionType:o})}))}))}(t).then((t=>{const{url:n,executionType:i,templatesInfoTaskUrl:o}=t;return n?(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{const[t]=e;return t(n,l).then((e=>{var n,a,r;if(i===b.AsynchronousSubmit){const i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.jobId;return t(`${o}/jobs/${i}/results/Output_JSON`,l).then((e=>{var t;return Promise.resolve((null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.value)||[])}))}return Promise.resolve((null===(r=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.results[0])||void 0===r?void 0:r.value)||[])}))})):Promise.resolve(null)}))}(t).then((e=>{const t=Me(e,s),n=Pe(null==o?void 0:o.templates,t);return a=a.set("printCustomTemplate",t).set("useUtility",l).set("formatList",null==o?void 0:o.formatList).set("defaultFormat",null==o?void 0:o.defaultFormat).set("layoutChoiceList",n),Promise.resolve(a)}))}))},Me=(e,t)=>null==t?void 0:t.map((t=>{var l,n,i,o,a,r,s;let d;e&&0!==(null==e?void 0:e.length)?e.forEach((e=>{t.label===e.layoutTemplate&&(d=e)})):d=u,(null==d?void 0:d.webMapFrameSize)&&(t.mapFrameSize=null==d?void 0:d.webMapFrameSize,t.mapFrameUnit=null==d?void 0:d.pageUnits);const c=null===(n=null===(l=null==d?void 0:d.layoutOptions)||void 0===l?void 0:l.customTextElements)||void 0===n?void 0:n.map((e=>{const t={};for(const l in e)t[l]=!0;return t})),v=Ce(null==d?void 0:d.layoutOptions);return t.mapFrameUnit=null==d?void 0:d.pageUnits,t.hasAuthorText=null===(i=null==d?void 0:d.layoutOptions)||void 0===i?void 0:i.hasAuthorText,t.hasCopyrightText=null===(o=null==d?void 0:d.layoutOptions)||void 0===o?void 0:o.hasCopyrightText,t.hasLegend=null===(a=null==d?void 0:d.layoutOptions)||void 0===a?void 0:a.hasLegend,t.hasTitleText=null===(r=null==d?void 0:d.layoutOptions)||void 0===r?void 0:r.hasTitleText,t.selectedFormatList=[null==t?void 0:t.format],t.layoutOptions.customTextElements=(null===(s=null==d?void 0:d.layoutOptions)||void 0===s?void 0:s.customTextElements)||[],t.layoutOptions.elementOverrides=v,t.customTextElementEnableList=c||[],t.enableNorthArrow=!!M(v),t})),Ce=e=>{const t=(null==e?void 0:e.mapSurroundInfos)||[],l=null==t?void 0:t.find((e=>e.type===`${n}`)),i={};return l&&(i[null==l?void 0:l.name]=l),(null==e?void 0:e.elementOverrides)||i},Pe=(e,t)=>(null==e?void 0:e.map((e=>(e.layoutTemplate=null==e?void 0:e.layout,null==t||t.forEach((t=>{(null==e?void 0:e.layout)===(null==t?void 0:t.layout)&&(e.mapFrameSize=null==t?void 0:t.mapFrameSize,e.mapFrameUnit=null==t?void 0:t.mapFrameUnit,e.hasAuthorText=null==t?void 0:t.hasAuthorText,e.hasCopyrightText=null==t?void 0:t.hasCopyrightText,e.hasLegend=null==t?void 0:t.hasLegend,e.hasTitleText=null==t?void 0:t.hasTitleText)})),e))))||[],ke=t=>{const l=e.UtilityManager.getInstance().getUtilityJson(t);return"org"===(null==l?void 0:l.source)?v.OrganizationService:v.Customize};var Ee=function(e,t,l,n){return new(l||(l=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function r(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))};class Le extends e.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.10.0",description:"update layoutChoiceList of old print widget",upgrader:t=>Ee(this,void 0,void 0,(function*(){const l=null==t?void 0:t.useUtility,n=t=>{var l,n,i,o,a,r;let s=(0,e.Immutable)(t);if(null===(l=null==t?void 0:t.exportOptions)||void 0===l?void 0:l.dpi){const e=Number(null===(n=null==t?void 0:t.exportOptions)||void 0===n?void 0:n.dpi);e<0?s=s.setIn(["exportOptions","dpi"],1):parseInt(e)!==e&&(s=s.setIn(["exportOptions","dpi"],parseInt(e)))}return(null===(i=null==t?void 0:t.exportOptions)||void 0===i?void 0:i.width)?Number(null===(o=null==t?void 0:t.exportOptions)||void 0===o?void 0:o.width)<1&&(s=s.setIn(["exportOptions","width"],800)):(null==t?void 0:t.layout)&&O(null==t?void 0:t.layout)&&(s=s.setIn(["exportOptions","width"],800)),(null===(a=null==t?void 0:t.exportOptions)||void 0===a?void 0:a.height)?Number(null===(r=null==t?void 0:t.exportOptions)||void 0===r?void 0:r.height)<1&&(s=s.setIn(["exportOptions","height"],1100)):(null==t?void 0:t.layout)&&O(null==t?void 0:t.layout)&&(s=s.setIn(["exportOptions","height"],1100)),null==s?void 0:s.asMutable({deep:!0})};if(t=(e=>{var t,l;return(null===(l=null===(t=null==e?void 0:e.commonSetting)||void 0===t?void 0:t.exportOptions)||void 0===l?void 0:l.dpi)?e.setIn(["commonSetting"],n(e.commonSetting)):e})(t),l){const e=yield(s=l,u=t,i=void 0,o=void 0,a=void 0,r=function*(){return N(s).then((e=>Te(e,s,u)))},new(a||(a=Promise))((function(e,t){function l(e){try{s(r.next(e))}catch(e){t(e)}}function n(e){try{s(r.throw(e))}catch(e){t(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(l,n)}s((r=r.apply(i,o||[])).next())})));if(null==e?void 0:e.layoutChoiceList){const l=((e,t)=>{var l;const i=(null===(l=null==e?void 0:e.printCustomTemplate)||void 0===l?void 0:l.asMutable({deep:!0}))||[];return i?null==i?void 0:i.map((e=>{var l;if(null==e?void 0:e.mapFrameSize)return n(e);{const i=null===(l=null==t?void 0:t.filter((t=>(null==t?void 0:t.layout)===(null==e?void 0:e.layout))))||void 0===l?void 0:l[0],o={mapFrameSize:null==i?void 0:i.mapFrameSize,mapFrameUnit:null==i?void 0:i.mapFrameUnit,hasAuthorText:null==i?void 0:i.hasAuthorText,hasCopyrightText:null==i?void 0:i.hasCopyrightText,hasLegend:null==i?void 0:i.hasLegend,hasTitleText:null==i?void 0:i.hasTitleText};return Object.assign(Object.assign({},n(e)),o)}})):i})(t,null==e?void 0:e.layoutChoiceList);return t.setIn(["layoutChoiceList"],null==e?void 0:e.layoutChoiceList).set("printCustomTemplate",l)}return t}var i,o,a,r,s,u;return t}))},{version:"1.13.0",description:"Add default print preview style for old print widget",upgrader:e=>Ee(this,void 0,void 0,(function*(){let t=e;return"boolean"!=typeof(null==e?void 0:e.enablePreview)&&(t=t.set("enablePreview",!0).set("previewBackgroundColor","rgba(0,216,237,1)").set("previewOutLine",i)),t}))}]}}const Ae=new Le,{useState:Re,useRef:ze,useEffect:Ve}=e.React,Ue=n=>{const{id:i,config:o,dispatch:a,useMapWidgetIds:r,layoutId:s,layoutItemId:u,locale:d}=n,m=e.hooks.useTranslation(g,t.defaultMessages),h=e.ReactRedux.useSelector((e=>{var t;const l=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.selection;return!(!l||l.layoutId!==s||l.layoutItemId!==u)})),x=ze(!1),b=e.css`
    .jimu-widget-placeholder {
      border: none;
    }
    &.surface-1 {
      border: none !important;
    }
    .checkbox-con:hover {
      color: var(--dark-800);
    }
  `;Ve((()=>{T()}),[h]),Ve((()=>{I()}),[o]);const[y,w]=Re(null),[j,O]=Re(m("printPleaceholder")),[S,N]=Re(null),I=()=>{var e,t;const l=(e=null==o?void 0:o.printServiceType,t=null==o?void 0:o.printTemplateType,e===v.Customize||t===p.Customize?null==o?void 0:o.printCustomTemplate:null==o?void 0:o.printOrgTemplate);N(l)},T=()=>{s&&i&&u&&!x.current&&h&&(a(e.appActions.widgetStatePropChange(i,"layoutInfo",{layoutId:s,layoutItemId:u})),x.current=!0)},M=()=>{let e=j;return y&&!(null==o?void 0:o.useUtility)&&(e=""),e},C=()=>!y||!(null==o?void 0:o.useUtility);return(0,e.jsx)("div",{className:(0,e.classNames)("w-100 h-100",{"surface-1":(null==o?void 0:o.modeType)===c.Classic}),css:b},(0,e.jsx)("div",{className:"map"},(0,e.jsx)("div",null,(0,e.jsx)(l.JimuMapViewComponent,{useMapWidgetId:null==r?void 0:r[0],onActiveViewChange:e=>null==e||"2d"!==e.view.type?(O(m("chooseMapTip")),void w(null)):(r&&0!==(null==r?void 0:r.length)||O(m("printPleaceholder")),void w(e)),onViewGroupCreate:e=>{}}))),(null==o?void 0:o.modeType)===c.Classic&&(0,e.jsx)("div",{className:"w-100 h-100"},!C()&&(0,e.jsx)(xe,{id:i,locale:d,config:o,jimuMapView:y,templateList:S}),C()&&(0,e.jsx)(t.WidgetPlaceholder,{icon:f(),widgetId:i,message:M()})),(null==o?void 0:o.modeType)===c.Compact&&(0,e.jsx)("div",{className:"w-100 h-100"},(0,e.jsx)(Se,{id:i,config:o,locale:d,jimuMapView:y,templateList:S,errorTip:M()})))};Ue.versionManager=Ae;const Fe=Ue;function $e(e){a.p=e}})(),r})())}}}));