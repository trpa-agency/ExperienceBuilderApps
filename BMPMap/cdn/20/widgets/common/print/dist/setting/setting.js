System.register(["jimu-core","jimu-arcgis","jimu-for-builder","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/basic/list-tree","jimu-ui/advanced/utility-selector","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-theme"],(function(e,t){var l={},i={},n={},o={},a={},s={},r={},u={},c={},d={};return{setters:[function(e){l.Immutable=e.Immutable,l.LayoutType=e.LayoutType,l.React=e.React,l.ReactRedux=e.ReactRedux,l.SupportedUtilityType=e.SupportedUtilityType,l.UtilityManager=e.UtilityManager,l.classNames=e.classNames,l.css=e.css,l.defaultMessages=e.defaultMessages,l.esri=e.esri,l.hooks=e.hooks,l.jsx=e.jsx,l.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules,l.moduleLoader=e.moduleLoader,l.polished=e.polished},function(e){i.JimuMapViewComponent=e.JimuMapViewComponent},function(e){n.getAppConfigAction=e.getAppConfigAction},function(e){o.Alert=e.Alert,o.AlertPopup=e.AlertPopup,o.Button=e.Button,o.Checkbox=e.Checkbox,o.CollapsablePanel=e.CollapsablePanel,o.Icon=e.Icon,o.Loading=e.Loading,o.MultiSelect=e.MultiSelect,o.NumericInput=e.NumericInput,o.Option=e.Option,o.Radio=e.Radio,o.Select=e.Select,o.Switch=e.Switch,o.TextInput=e.TextInput,o.defaultMessages=e.defaultMessages},function(e){a.MapWidgetSelector=e.MapWidgetSelector,a.SettingRow=e.SettingRow,a.SettingSection=e.SettingSection,a.SidePopper=e.SidePopper},function(e){s.List=e.List,s.TreeItemActionType=e.TreeItemActionType},function(e){r.UtilitySelector=e.UtilitySelector},function(e){u.SizeColorSetting=e.SizeColorSetting},function(e){c.ThemeColorPicker=e.ThemeColorPicker},function(e){d.getTheme2=e.getTheme2}],execute:function(){e((()=>{var e={748:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5Zm-9 0a3.501 3.501 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5ZM15.5 11l-5 1-3 4-1-9.5 9 4.5Zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38-2.517.503Z" clip-rule="evenodd"></path></svg>'},55339:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z"></path></svg>'},59216:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.226 1.312c-.403-.404-1.044-.417-1.431-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431l-1.462-1.462Zm-8.113 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991-1.781.32Zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402 1.461 1.461Z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z"></path></svg>'},34750:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5Z"></path></svg>'},27218:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8Z"></path></svg>'},79964:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667L8 2.125Zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47L7.118 1.653ZM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995Zm1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" clip-rule="evenodd"></path></svg>'},69797:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODciIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA4NyA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHdpZHRoPSI4NyIgaGVpZ2h0PSI2NCIgZmlsbD0iIzI4MjgyOCIvPg0KPHJlY3QgeD0iMyIgeT0iNTIiIHdpZHRoPSI4MSIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04NCAyNUgzVjI5SDg0VjI1Wk00MyAzN0gzVjQxSDQzVjM3WiIgZmlsbD0iIzQ0NDQ0NCIvPg0KPHJlY3QgeD0iMTQiIHk9IjUiIHdpZHRoPSIyMCIgaGVpZ2h0PSI2IiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI1MyIgeT0iNSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjYiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjMiIHk9IjE2IiB3aWR0aD0iODEiIGhlaWdodD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMyIgeT0iMTYiIHdpZHRoPSI0MCIgaGVpZ2h0PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8L3N2Zz4NCg=="},80941:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODciIGhlaWdodD0iNDYiIHZpZXdCb3g9IjAgMCA4NyA0NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHk9IjE2IiB3aWR0aD0iODciIGhlaWdodD0iMzAiIGZpbGw9IiMyODI4MjgiLz4NCjxyZWN0IHg9IjQiIHk9IjIzIiB3aWR0aD0iNzkiIGhlaWdodD0iNiIgZmlsbD0iIzQ0NDQ0NCIvPg0KPHJlY3QgeD0iNCIgeT0iMzgiIHdpZHRoPSI0MCIgaGVpZ2h0PSIzIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSI2MyIgeT0iMzYiIHdpZHRoPSIyMCIgaGVpZ2h0PSI3IiByeD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3Qgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiByeD0iMiIgZmlsbD0iIzUyNTI1MiIvPg0KPC9zdmc+DQo="},26826:e=>{"use strict";e.exports=i},48891:e=>{"use strict";e.exports=l},23137:e=>{"use strict";e.exports=n},34796:e=>{"use strict";e.exports=d},30726:e=>{"use strict";e.exports=o},77756:e=>{"use strict";e.exports=a},55505:e=>{"use strict";e.exports=u},52785:e=>{"use strict";e.exports=r},41362:e=>{"use strict";e.exports=c},59587:e=>{"use strict";e.exports=s}},t={};function p(l){var i=t[l];if(void 0!==i)return i.exports;var n=t[l]={exports:{}};return e[l](n,n.exports,p),n.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var l in t)p.o(t,l)&&!p.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="";var m={};return p.p=window.jimuConfig.baseUrl,(()=>{"use strict";p.r(m),p.d(m,{__set_webpack_public_path__:()=>Ce,default:()=>Te});var e=p(48891),t=p(26826),l=p(23137),i=p(30726),n=p(77756);const o="CIMMarkerNorthArrow",a={color:"#000",size:"4px"};var s,r;!function(e){e.CurrentMapExtent="CURRENT MAP EXTENT",e.CurrentMapScale="CURRENT MAP SCALE",e.SetMapScale="SET MAP SCALE"}(s||(s={})),function(e){e.Point="POINT",e.Inch="INCH",e.Centimeter="CENTIMETER",e.Millimeter="MILLIMETER"}(r||(r={}));const u={layoutOptions:{customTextElements:[],hasAuthorText:!0,hasCopyrightText:!0,hasLegend:!0,hasTitleText:!0},mapSurroundInfos:[],pageSize:null,pageUnits:null,webMapFrameSize:null},c={scalePreserved:!1,outScale:36978595.474472,layoutOptions:{titleText:"ArcGIS Web Map"},exportOptions:{dpi:96},printExtentType:s.CurrentMapExtent,attributionVisible:!1,forceFeatureAttributes:!0,wkid:102100,wkidLabel:"WGS_1984_Web_Mercator_Auxiliary_Sphere",enableTitle:!0,legendEnabled:!0,enableMapPrintExtents:!0,enableOutputSpatialReference:!0,enableQuality:!0,enableFeatureAttribution:!0,enableMapSize:!0,overrideCommonSetting:!1,enableAuthor:!0,enableCopyright:!0,enableLegend:!0,enableScalebarUnit:!0,enableCustomTextElements:!0};var d,v,g,h,b;!function(e){e.Classic="CLASSIC",e.Compact="COMPACT"}(d||(d={})),function(e){e.OrganizationService="ORGANIZATION SERVICE",e.Customize="CUSTOMIZE"}(v||(v={})),function(e){e.OrganizationTemplate="ORGANIZATION TEMPLATE",e.Customize="CUSTOMIZE"}(g||(g={})),function(e){e.Loading="LOADING",e.Success="SUCCESS",e.Error="ERROR"}(h||(h={})),function(e){e.PrintTemplate="PRINT TEMPLATE",e.PrintResult="PRINT RESULT"}(b||(b={}));const x={printSource:"Source",selectMap:"Select a map widget with 2D data",printMode:"Mode",printClassic:"Classic",printCompact:"Compact",configurePrintTemplate:"Print template",printService:"Print service",useOrganizationDervice:"Use organization service",printCustomize:"Customize",printTemplate:"Print template",useOrganizationTemplate:"Use organization template",newPrintTemplate:"New print template",newTemplate:"New template",templateCommonSettings:"Template common settings",setDefaults:"Set defaults",printTitle:"Title",mapPrintingExtents:"Map printing extents",outputSpatialReference:"Output spatial reference",printQuality:"Print quality",featureAttribution:"Feature attribution",selectEditableSettings:"Select editable settings",currentMapExtent:"Current map extent",currentMapScale:"Current map scale",setMapScale:"Set map scale",useCurrentScale:"Use current scale",allowEditing:"Select settings that allow editing at runtime",wellKnownId:"Enter a well-known ID ({wkid})",includeAttribution:"Include attribution",includeLegend:"Include legend",templateConfiguration:"Template configuration",templateName:"Template name",fileFormat:"File format",printLayout:"Layout",MapOnlyOptions:"Map-only options",LayoutOptions:"Layout options",mapSize:"Map size",overrideCommonSettings:"Override common settings",overrideSettingsTitle:"Are you sure you want to disable override settings?",overrideSettingsRemind:"You will lose the settings configured.",printTemplateAuthor:"Author",copyright:"Copyright",legend:"Legend",scaleBarUnit:"Scalebar unit",miles:"Miles",kilometers:"Kilometers",meters:"Meters",feet:"Feet",mapAttribution:"Map attribution",utilityPlaceholder:"Click the “Select utility” button to add utilities for further configurations.",featureAttributes:"Feature attributes",includeAttributes:"Include attributes",northArrow:"North arrow",includeNorthArrow:"Include north arrow",serviceIsNotAvailable:"Service is not available.",printPreviewStyle:"Print preview style",enablePrintPreview:"Enable print preview"};var f,y=function(e,t,l,i){return new(l||(l=Promise))((function(n,o){function a(e){try{r(i.next(e))}catch(e){o(e)}}function s(e){try{r(i.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,s)}r((i=i.apply(e,t||[])).next())}))};!function(e){e.AsynchronousSubmit="esriExecutionTypeAsynchronous",e.SynchronousExecute="esriExecutionTypeSynchronous"}(f||(f={}));const w=(e,t)=>e===v.Customize||t===g.Customize?"custom":"org",S=(t,l)=>{let i=l;return(null==t?void 0:t.exportOptions)&&(i=i.set("exportOptions",Object.assign(Object.assign({},t.exportOptions||{}),(null==l?void 0:l.exportOptions)||{}))),(null==t?void 0:t.layoutOptions)&&(null==l?void 0:l.layoutOptions)&&(i=i.set("layoutOptions",Object.assign(Object.assign({},(null==t?void 0:t.layoutOptions)||{}),(null==l?void 0:l.layoutOptions)||{}))),(0,e.Immutable)(Object.assign(Object.assign({},t),i))},I=(e,t)=>e===v.Customize||t===g.Customize,j=e=>"map-only"===(e=>{var t,l;return null===(l=null===(t=null==e?void 0:e.replace(/\_/gi,"-"))||void 0===t?void 0:t.replace(/\s+/gi,"-"))||void 0===l?void 0:l.toLowerCase()})(e);function T(t){return y(this,void 0,void 0,(function*(){return(0,e.loadArcGISJSAPIModules)(["esri/rest/support/LegendLayer"]).then((e=>{var l,i,n;const[o]=e,a=C((null===(n=null===(i=null===(l=null==t?void 0:t.view)||void 0===l?void 0:l.map)||void 0===i?void 0:i.layers)||void 0===n?void 0:n.toArray())||[],o);return Promise.resolve(a)}))}))}function C(e,t){if(!e)return[];let l=[];return null==e||e.forEach((e=>{var i;const n=(null==e?void 0:e.effect)&&(null==e?void 0:e.effect.length)>0;if("graphics"!==e.type&&e.visible&&(null==e?void 0:e.legendEnabled)&&!n){const n=(null==e?void 0:e.subLayerIds)||null;if("group"===(null==e?void 0:e.type)){const n=C((null===(i=null==e?void 0:e.layers)||void 0===i?void 0:i._items)||[],t)||[];l=l.concat(n)}const o=new t({layerId:null==e?void 0:e.id,title:null==e?void 0:e.title,subLayerIds:n});l.push(o)}})),l}function N(e={}){var t;let l=null;for(const i in e)(null===(t=null==e?void 0:e[i])||void 0===t?void 0:t.type)===o&&(l=i);return l}var O=p(59587);const k=p(55339),M=t=>{const l=e.hooks.useTranslation(e.defaultMessages,i.defaultMessages),{className:n,config:o,activeTemplateId:a,showNewTemplateItem:s,handelActiveTemplateIdChange:r,handelTemplateListChange:u}=t,c={overrideItemBlockInfo:({itemBlockInfo:e},t)=>({name:O.TreeItemActionType.RenderOverrideItem,children:[{name:O.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:O.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:O.TreeItemActionType.RenderOverrideItemBody,children:[{name:O.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:O.TreeItemActionType.RenderOverrideItemDragHandle},{name:O.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:O.TreeItemActionType.RenderOverrideItemTitle},{name:O.TreeItemActionType.RenderOverrideItemDetailToggle},{name:O.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})};e.React.useEffect((()=>{p((null==o?void 0:o.printTemplateType)===g.Customize||(null==o?void 0:o.printServiceType)===v.Customize),b()}),[o]);const[d,p]=e.React.useState((null==o?void 0:o.printTemplateType)===g.Customize||(null==o?void 0:o.printServiceType)===v.Customize),[m,h]=e.React.useState([]),b=()=>{var e,t;(null==o?void 0:o.printServiceType)===v.Customize||(null==o?void 0:o.printTemplateType)===g.Customize?h((null===(e=null==o?void 0:o.printCustomTemplate)||void 0===e?void 0:e.asMutable({deep:!0}))||[]):h((null===(t=null==o?void 0:o.printOrgTemplate)||void 0===t?void 0:t.asMutable({deep:!0}))||[])},x=e=>(null==o?void 0:o.printTemplateType)===g.Customize?[{label:l("deleteOption"),iconProps:()=>({icon:k,size:12}),action:()=>{(e=>{const t=m;null==t||t.splice(e,1),u(t),r(null)})(e)}}]:[];return(0,e.jsx)("div",{className:`w-100 mt-2 ${n||""}`},(0,e.jsx)(O.List,Object.assign({className:"w-100",itemsJson:Array.from(m).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${null==e?void 0:e.templateId}`,itemStateChecked:a&&(null==e?void 0:e.templateId)===a,itemStateTitle:null==e?void 0:e.label,itemStateIcon:null,itemStateCommands:x(t)}))),dndEnabled:d,renderOverrideItemDetailToggle:()=>"",onUpdateItem:(e,t)=>{const{itemJsons:l}=t.props,[,i]=l,n=i.map((e=>e.itemStateDetailContent));r(null),u(n)},onClickItemBody:(e,t)=>{const{itemJsons:l}=t.props,i=l[0],n=l[1];r(i.itemKey,n.indexOf(i))}},c)),s&&(0,e.jsx)(O.List,Object.assign({className:"setting-ui-unit-list-new",itemsJson:[{name:"......"}].map(((e,t)=>({itemStateDetailContent:"item",itemKey:"index",itemStateChecked:!0,itemStateTitle:"......",itemStateCommands:[]}))),dndEnabled:!1,renderOverrideItemDetailToggle:()=>""},c)))};function P(t){const l={query:{f:"json"},responseType:"json"};return(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{const[i]=e;return i(t,l).then((e=>function(e){return t=this,l=void 0,n=function*(){let t=!1,l=!1;const i=(null==e?void 0:e.parameters)||[];let n=[],o=[],a="png32";return null==i||i.forEach((e=>{var i,s;if("Layout_Template"===e.name){const t=e.choiceList,l=e.defaultValue;t?n=null==t?void 0:t.map((e=>R(e))):n.push(R(l))}if("Format"===e.name){const t=null===(i=null==e?void 0:e.choiceList)||void 0===i?void 0:i.map((e=>null==e?void 0:e.toLowerCase()));a=null===(s=e.defaultValue)||void 0===s?void 0:s.toLowerCase(),o=t||[a]}"string"==typeof e.name&&"web_map_as_json"===e.name.toLowerCase()&&(t=!0),"string"==typeof e.name&&"output_file"===e.name.toLowerCase()&&(l=!0)})),Promise.resolve({templates:n,formatList:o,defaultFormat:a,hasWebmapParam:t,hasOutputParam:l})},new((i=void 0)||(i=Promise))((function(e,o){function a(e){try{r(n.next(e))}catch(e){o(e)}}function s(e){try{r(n.throw(e))}catch(e){o(e)}}function r(t){var l;t.done?e(t.value):(l=t.value,l instanceof i?l:new i((function(e){e(l)}))).then(a,s)}r((n=n.apply(t,l||[])).next())}));var t,l,i,n}(null==e?void 0:e.data)))}))}function R(e){const t=j(e)?{}:{layoutOptions:{legend:!1}};return Object.assign({label:e,layout:e,format:"PNG32"},t)}var A=p(34750),E=p.n(A);const L=t=>{const l=window.SVG,{className:i}=t,n=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(l[i[n]]=e[i[n]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",i);return l?e.React.createElement(l,Object.assign({className:o,src:E()},n)):e.React.createElement("svg",Object.assign({className:o},n))};var z=p(27218),U=p.n(z);const D=t=>{const l=window.SVG,{className:i}=t,n=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(l[i[n]]=e[i[n]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",i);return l?e.React.createElement(l,Object.assign({className:o,src:U()},n)):e.React.createElement("svg",Object.assign({className:o},n))};var Z=function(e,t,l,i){return new(l||(l=Promise))((function(n,o){function a(e){try{r(i.next(e))}catch(e){o(e)}}function s(e){try{r(i.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,s)}r((i=i.apply(e,t||[])).next())}))};const $=p(59216),B=new(0,e.esri.Sanitizer),{useRef:V}=e.React;var F;!function(e){e.Title="TITLE",e.Extents="EXTENTS",e.SpatialReference="SPATIAL REFERENCE",e.Feature="FEATURE ATTRIBUTION",e.Quality="QUALITY"}(F||(F={}));const H=t=>{var l,o;const a=e.hooks.useTranslation(x,e.defaultMessages,i.defaultMessages),r=e.React.useRef(null),u=V(null),c=V(!1),p=e.css`
    .dpi-input .input-wrapper{
      padding-right: 0;
    }
    .radio-con {
      cursor: ponter;
    }
    .use-current-map-scale svg{
      margin: 0 auto;
    }
    .enable-setting-con .jimu-widget-setting--row-label{
      margin-bottom: 0;
    }
    .wkid-describtion {
      font-size: ${e.polished.rem(12)};
      color: var(--dark-400);
    }
    .wkid-describtion-invalid {
      color: var(--danger-700)
    }
    .check-box-con, .radio-con {
      color: var(--dark-400);
      font-size: ${e.polished.rem(14)};
      line-height: ${e.polished.rem(22)};
      margin: ${e.polished.rem(4)} 0 ${e.polished.rem(8)} 0;
    }
  `,{printTemplateProperties:m,modeType:v,jimuMapView:g,handleTemplatePropertyChange:h}=t,[b,f]=e.React.useState(null),[y,w]=e.React.useState((null===(l=m.layoutOptions)||void 0===l?void 0:l.titleText)||""),[S,I]=e.React.useState(null==m?void 0:m.wkid),[j,T]=e.React.useState(null===(o=null==m?void 0:m.exportOptions)||void 0===o?void 0:o.dpi),[C,N]=e.React.useState(null==m?void 0:m.outScale),[O,k]=e.React.useState(null);e.React.useEffect((()=>{var e,t;w((null===(e=m.layoutOptions)||void 0===e?void 0:e.titleText)||""),I(null==m?void 0:m.wkid),r.current=null==m?void 0:m.wkid,T(null===(t=null==m?void 0:m.exportOptions)||void 0===t?void 0:t.dpi),N(null==m?void 0:m.outScale),(null==m?void 0:m.wkidLabel)?k(null==m?void 0:m.wkidLabel):u.current&&M(null==m?void 0:m.wkid).then((e=>{k(e)}))}),[m]);const M=t=>Z(void 0,void 0,void 0,(function*(){if(c.current){const{getSRLabel:e}=u.current;return Promise.resolve(e(t))}return e.moduleLoader.loadModule("jimu-core/wkid").then((e=>{u.current=e,c.current=!0;const{getSRLabel:l}=u.current;return Promise.resolve(l(t))}))})),P=t=>Z(void 0,void 0,void 0,(function*(){if(c.current){const{isValidWkid:e}=u.current;return Promise.resolve(e(t))}return e.moduleLoader.loadModule("jimu-core/wkid").then((e=>{u.current=e,c.current=!0;const{isValidWkid:l}=u.current;return Promise.resolve(l(t))}))})),R=e=>Z(void 0,void 0,void 0,(function*(){if(e===F.SpatialReference&&!(null==m?void 0:m.wkidLabel)){const e=yield M(null==m?void 0:m.wkid);k(e)}f(e)})),A=()=>{f(null)},E=e=>{var t;let l=m.setIn(["printExtentType"],e);const i=g?null===(t=null==g?void 0:g.view)||void 0===t?void 0:t.scale:36978595.474472;switch(e){case s.CurrentMapExtent:l=l.setIn(["scalePreserved"],!1);break;case s.CurrentMapScale:l=l.setIn(["scalePreserved"],!0);break;case s.SetMapScale:l=l.setIn(["scalePreserved"],!0),l=l.setIn(["outScale"],i)}h(l)},L=e=>{const t=m.setIn([e],!(null==m?void 0:m[e]));h(t)};return(0,e.jsx)("div",{css:p},(0,e.jsx)("div",{role:"group","aria-label":a("setDefaults")},(0,e.jsx)(n.SettingRow,{label:a("setDefaults"),flow:"wrap"}),(0,e.jsx)(i.CollapsablePanel,{label:a("printTitle"),isOpen:b===F.Title,onRequestOpen:()=>{R(F.Title)},onRequestClose:A,role:"group","aria-label":a("printTitle"),rightIcon:$,type:"primary",className:b===F.Title&&"active-collapse"},(0,e.jsx)(n.SettingRow,{className:"mt-2"},(0,e.jsx)(i.TextInput,{size:"sm",className:"search-placeholder w-100",placeholder:a("printTitle"),value:y,onAcceptValue:e=>{const t=m.setIn(["layoutOptions","titleText"],e);h(t)},onChange:e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;w(l)},"aria-label":a("printTitle")}))),(0,e.jsx)(i.CollapsablePanel,{label:a("mapPrintingExtents"),isOpen:b===F.Extents,onRequestOpen:()=>{R(F.Extents)},onRequestClose:A,role:"group","aria-label":a("mapPrintingExtents"),rightIcon:$,type:"primary",className:b===F.Extents&&"active-collapse"},(0,e.jsx)(n.SettingRow,{className:"mt-2"},(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{title:a("currentMapExtent"),"aria-label":a("currentMapExtent"),className:"d-flex align-items-center radio-con",onClick:()=>{E(s.CurrentMapExtent)}},(0,e.jsx)(i.Radio,{title:a("currentMapExtent"),checked:(null==m?void 0:m.printExtentType)===s.CurrentMapExtent,className:"mr-2"})," ",a("currentMapExtent")),(0,e.jsx)("div",{title:a("currentMapScale"),"aria-label":a("currentMapScale"),className:"d-flex align-items-center radio-con",onClick:()=>{E(s.CurrentMapScale)}},(0,e.jsx)(i.Radio,{title:a("currentMapScale"),checked:(null==m?void 0:m.printExtentType)===s.CurrentMapScale,className:"mr-2"})," ",a("currentMapScale")),(0,e.jsx)("div",{title:a("setMapScale"),"aria-label":a("setMapScale"),className:"d-flex align-items-center radio-con",onClick:()=>{E(s.SetMapScale)}},(0,e.jsx)(i.Radio,{title:a("setMapScale"),checked:(null==m?void 0:m.printExtentType)===s.SetMapScale,className:"mr-2"})," ",a("setMapScale")),(null==m?void 0:m.printExtentType)===s.SetMapScale&&(0,e.jsx)("div",{className:"d-flex mt-1 align-items-center"},(0,e.jsx)(i.NumericInput,{size:"sm",className:"search-placeholder flex-grow-1 dpi-input",value:C,onAcceptValue:e=>{const t=m.setIn(["outScale"],e);h(t)},onChange:e=>{N(e)},showHandlers:!1}),(0,e.jsx)(i.Button,{className:"use-current-map-scale",size:"sm",title:a("useCurrentScale"),disabled:!g,onClick:()=>{var e;if(!g)return;const t=null===(e=null==g?void 0:g.view)||void 0===e?void 0:e.scale,l=m.setIn(["outScale"],t);h(l)}},(0,e.jsx)(D,null)))))),(0,e.jsx)(i.CollapsablePanel,{label:a("outputSpatialReference"),isOpen:b===F.SpatialReference,onRequestOpen:()=>{R(F.SpatialReference)},onRequestClose:A,role:"group",type:"primary","aria-label":a("outputSpatialReference"),rightIcon:$,className:b===F.SpatialReference&&"active-collapse"},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:(0,e.jsx)("div",{className:"flex-grow-1",dangerouslySetInnerHTML:{__html:B.sanitize(a("wellKnownId",{wkid:'<a target="_blank" href="https://developers.arcgis.com/rest/services-reference/enterprise/using-spatial-references.htm">WKID</a>'}))}}),className:"mt-2"},(0,e.jsx)(i.NumericInput,{size:"sm",className:"search-placeholder w-100",value:S,onAcceptValue:e=>Z(void 0,void 0,void 0,(function*(){if(!(yield P(e))){I(r.current);const t=yield M(e);return k(t),!1}r.current=e;const t=m.setIn(["wkid"],e).set("wkidLabel",O);h(t);const l=yield M(e);k(l)})),onChange:e=>Z(void 0,void 0,void 0,(function*(){if(I(e),yield P(e)){const t=yield M(e);k(t)}else k(a("invalidWKID"))})),showHandlers:!1,"aria-label":a("wellKnownId",{wkid:"WKID"}),"aria-describedby":"print-wkid-describtion"}),(0,e.jsx)("div",{id:"print-wkid-describtion",className:(0,e.classNames)("text-truncate mt-1 wkid-describtion",{"wkid-describtion-invalid":!(e=>{if(u.current){const{isValidWkid:t}=u.current;return t(e)}return!0})(Number(S))}),title:O,"aria-label":O},O))),(0,e.jsx)(i.CollapsablePanel,{label:a("printQuality"),isOpen:b===F.Quality,onRequestOpen:()=>{R(F.Quality)},onRequestClose:A,role:"group","aria-label":a("printQuality"),type:"primary",rightIcon:$,className:b===F.Quality&&"active-collapse"},(0,e.jsx)(n.SettingRow,{className:"mt-2"},(0,e.jsx)("div",{className:"d-flex align-items-center w-100"},(0,e.jsx)(i.NumericInput,{size:"sm",className:"search-placeholder flex-grow-1 dpi-input",placeholder:a("printQuality"),value:j,onAcceptValue:e=>{if(e<1)return!1;const t=m.setIn(["exportOptions","dpi"],parseInt(e));h(t)},onChange:e=>{if(e<1)return!1;T(parseInt(e))},showHandlers:!1,"aria-label":a("printQuality")}),(0,e.jsx)(i.Button,{disabled:!0,size:"sm",title:"DPI"},"DPI")))),(0,e.jsx)(i.CollapsablePanel,{label:a("featureAttributes"),isOpen:b===F.Feature,onRequestOpen:()=>{R(F.Feature)},onRequestClose:A,role:"group",type:"primary","aria-label":a("featureAttributes"),rightIcon:$,className:b===F.Feature&&"active-collapse"},(0,e.jsx)(n.SettingRow,{className:"mt-2"},(0,e.jsx)("div",{title:a("includeAttributes"),className:"d-flex w-100 align-items-center check-box-con","aria-label":a("includeAttributes"),onClick:()=>{L("forceFeatureAttributes")}},(0,e.jsx)(i.Checkbox,{title:a("includeAttributes"),className:"lock-item-ratio","data-field":"forceFeatureAttributes",checked:(null==m?void 0:m.forceFeatureAttributes)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},a("includeAttributes")))))),v===d.Classic&&(0,e.jsx)(n.SettingRow,{className:"mt-3 enable-setting-con",flow:"wrap",role:"group","aria-label":a("selectEditableSettings"),label:a("selectEditableSettings")},(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{title:a("printTitle"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{(()=>{let e=m.setIn(["showLabels"],!(null==m?void 0:m.showLabels));e=e.setIn(["enableTitle"],!(null==m?void 0:m.enableTitle)),h(e)})()}},(0,e.jsx)(i.Checkbox,{title:a("printTitle"),className:"lock-item-ratio","data-field":"enableTitle",checked:(null==m?void 0:m.enableTitle)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},a("printTitle"))),(0,e.jsx)("div",{title:a("mapPrintingExtents"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{L("enableMapPrintExtents")}},(0,e.jsx)(i.Checkbox,{title:a("mapPrintingExtents"),className:"lock-item-ratio","data-field":"enableMapPrintExtents",checked:(null==m?void 0:m.enableMapPrintExtents)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},a("mapPrintingExtents"))),(0,e.jsx)("div",{title:a("outputSpatialReference"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{L("enableOutputSpatialReference")}},(0,e.jsx)(i.Checkbox,{title:a("outputSpatialReference"),className:"lock-item-ratio","data-field":"enableOutputSpatialReference",checked:(null==m?void 0:m.enableOutputSpatialReference)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},a("outputSpatialReference"))),(0,e.jsx)("div",{title:a("printQuality"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{L("enableQuality")}},(0,e.jsx)(i.Checkbox,{title:a("printQuality"),className:"lock-item-ratio","data-field":"enableQuality",checked:(null==m?void 0:m.enableQuality)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},a("printQuality"))),(0,e.jsx)("div",{title:a("featureAttributes"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{L("enableFeatureAttribution")}},(0,e.jsx)(i.Checkbox,{title:a("featureAttributes"),className:"lock-item-ratio","data-field":"enableFeatureAttribution",checked:(null==m?void 0:m.enableFeatureAttribution)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},a("featureAttributes"))))))};var Q=p(79964),W=p.n(Q);const G=t=>{const l=window.SVG,{className:i}=t,n=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(l[i[n]]=e[i[n]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",i);return l?e.React.createElement(l,Object.assign({className:o,src:W()},n)):e.React.createElement("svg",Object.assign({className:o},n))};const{useEffect:_,useState:q}=e.React,J=p(59216);var K;!function(e){e.MapSize="MAP SIZE",e.Author="AUTHOR",e.Copyright="COPYRIGHT",e.Legend="LEGEND",e.ScaleBarUnit="SCALE BAR UNIT",e.AttributionVisible="ATTRIBUTION VISIBLE",e.CustomTextElements="CUSTOM TEXZT ELEMENTS",e.NorthArrow="NORTH ARROW"}(K||(K={}));const Y=t=>{var l,o,a,s,r;const u=e.hooks.useTranslation(x,i.defaultMessages,e.defaultMessages),{id:c,isOpen:p,trigger:m,popperFocusNode:v,config:h,activeTemplateId:b,jimuMapView:f,toggle:y,handelTemplateListChange:w}=t;_((()=>{se()}),[h,b]);const[C,O]=q(null),[k,M]=q(null),[P,R]=q(null),[A,E]=q((null==C?void 0:C.label)||""),[L,z]=q(null===(l=null==C?void 0:C.exportOptions)||void 0===l?void 0:l.width),[U,D]=q(null===(o=null==C?void 0:C.exportOptions)||void 0===o?void 0:o.height),[Z,$]=q((null===(a=null==C?void 0:C.layoutOptions)||void 0===a?void 0:a.authorText)||""),[B,V]=q((null===(s=null==C?void 0:C.layoutOptions)||void 0===s?void 0:s.copyrightText)||""),[F,Q]=q(null),[W,Y]=q(null===(r=null==C?void 0:C.layoutOptions)||void 0===r?void 0:r.customTextElements),[X,ee]=q(null),[te,le]=q(!1),[ie,ne]=q(null);_((()=>{var e,t,l,i,n,o;ne(N(null===(e=null==C?void 0:C.layoutOptions)||void 0===e?void 0:e.elementOverrides)),E((null==C?void 0:C.label)||""),z(null===(t=null==C?void 0:C.exportOptions)||void 0===t?void 0:t.width),D(null===(l=null==C?void 0:C.exportOptions)||void 0===l?void 0:l.height),$((null===(i=null==C?void 0:C.layoutOptions)||void 0===i?void 0:i.authorText)||""),V((null===(n=null==C?void 0:C.layoutOptions)||void 0===n?void 0:n.copyrightText)||""),Y(null===(o=null==C?void 0:C.layoutOptions)||void 0===o?void 0:o.customTextElements)}),[C]),_((()=>{ae()}),[]),_((()=>{oe()&&ae()}),[W]);const oe=()=>{if(!W)return!1;if((null==W?void 0:W.length)!==(null==X?void 0:X.length))return!0;{let e=!1;return null==W||W.forEach(((t,l)=>{for(const i in t)Object.prototype.hasOwnProperty.call(X[l],i)||(e=!0)})),e}},ae=()=>{const t=null==W?void 0:W.map(((e,t)=>{const l={};for(const t in e)l[t]=!1;return l}));ee((0,e.Immutable)(t||[]))},se=()=>{const e=I(null==h?void 0:h.printServiceType,null==h?void 0:h.printTemplateType)?null==h?void 0:h.printCustomTemplate:null==h?void 0:h.printOrgTemplate,t=((e,t)=>{let l;return null==e||e.forEach(((e,i)=>{(null==e?void 0:e.templateId)===t&&(l=i)})),l})(null==e?void 0:e.asMutable({deep:!0}),b);M(t),R(e),O((null==e?void 0:e[t])||null)},re=(e,t)=>{const l=C.setIn(e,t),i=null==P?void 0:P.asMutable({deep:!0});i[k]=null==l?void 0:l.asMutable({deep:!0}),w(i)},ue=e=>{if(!e)return E(null==C?void 0:C.label),!1;re(["label"],e)},ce=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;E(l)},de=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;$(l)},pe=e=>{re(["layoutOptions","authorText"],e)},me=e=>{var t;const l=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;V(l)},ve=e=>{re(["layoutOptions","copyrightText"],e)},ge=e=>{be(),Q(e)},he=()=>{be(),Q(null)},be=()=>{const e=null==X?void 0:X.map((e=>{const t={};for(const l in e)t[l]=!1;return t}));ee(e)},xe=e=>{const t=e.target.value;re(["layoutOptions","scalebarUnit"],t)},fe=t=>{var l,i,n,o;const a=t.target.value,s=null===(n=null===(i=null===(l=null==h?void 0:h.layoutChoiceList)||void 0===l?void 0:l.filter((e=>(null==e?void 0:e.layout)===a)))||void 0===i?void 0:i[0])||void 0===n?void 0:n.asMutable({deep:!0}),r={mapFrameSize:null==s?void 0:s.mapFrameSize,mapFrameUnit:null==s?void 0:s.mapFrameUnit,hasAuthorText:null==s?void 0:s.hasAuthorText,hasCopyrightText:null==s?void 0:s.hasCopyrightText,hasLegend:null==s?void 0:s.hasLegend,hasTitleText:null==s?void 0:s.hasTitleText,layout:a};let u=Object.assign(Object.assign({},null==C?void 0:C.asMutable({deep:!0})),r);j(null==s?void 0:s.layout)&&(u=null===(o=(0,e.Immutable)(u).setIn(["exportOptions","width"],800).setIn(["exportOptions","height"],1100))||void 0===o?void 0:o.asMutable({deep:!0}));const c=null==P?void 0:P.asMutable({deep:!0});c[k]=u,w(c)},ye=e=>{re([e],!(null==C?void 0:C[e]))},we=()=>{const e=!(null==C?void 0:C.overrideCommonSetting);if(e){let t=C.setIn(["overrideCommonSetting"],e);t=S(t,null==h?void 0:h.commonSetting);const l=null==P?void 0:P.asMutable({deep:!0});l[k]=null==t?void 0:t.asMutable({deep:!0}),w(l)}else re(["overrideCommonSetting"],e)},Se=e=>{return t=void 0,l=void 0,n=function*(){const e=Ie()?null:yield T(f);re(["layoutOptions","legendLayers"],e)},new((i=void 0)||(i=Promise))((function(e,o){function a(e){try{r(n.next(e))}catch(e){o(e)}}function s(e){try{r(n.throw(e))}catch(e){o(e)}}function r(t){var l;t.done?e(t.value):(l=t.value,l instanceof i?l:new i((function(e){e(l)}))).then(a,s)}r((n=n.apply(t,l||[])).next())}));var t,l,i,n},Ie=()=>{var e;return!!(null===(e=null==C?void 0:C.layoutOptions)||void 0===e?void 0:e.legendLayers)},je=(e,t)=>{const l=null==X?void 0:X.map(((l,i)=>{const n={};for(const o in l)n[o]=t===i&&o===e&&!X[t][e];return n}));Q(null),ee(l)},Te=(e,t)=>{var l,i;const n=null===(l=null==C?void 0:C.customTextElementEnableList)||void 0===l?void 0:l[t],o=n.set(e,!(null==n?void 0:n[e])),a=null===(i=null==C?void 0:C.customTextElementEnableList)||void 0===i?void 0:i.asMutable({deep:!0});a.splice(t,1,o),re(["customTextElementEnableList"],a)},Ce=(e,t,l)=>{const i=W[e].set(t,l),n=null==W?void 0:W.asMutable({deep:!0});n.splice(e,1,i),re(["layoutOptions","customTextElements"],n)},Ne=(t,l,i)=>{var n;const o=null===(n=null==i?void 0:i.target)||void 0===n?void 0:n.value,a=W[t].set(l,o),s=null==W?void 0:W.asMutable({deep:!0});s.splice(t,1,a),Y((0,e.Immutable)(s))},Oe=()=>{var e,t,l;const i=null===(l=null===(t=null===(e=null==C?void 0:C.layoutOptions)||void 0===e?void 0:e.elementOverrides)||void 0===t?void 0:t[ie])||void 0===l?void 0:l.visible;re(["layoutOptions","elementOverrides",ie,"visible"],!i)},ke=(e,t,l)=>{if(0===(null==l?void 0:l.length))return!1;let i=C.set("selectedFormatList",l);(null==l?void 0:l.includes(i.format))||(i=i.set("format",l[0]));const n=null==P?void 0:P.asMutable({deep:!0});n[k]=null==i?void 0:i.asMutable({deep:!0}),w(n)},Me=()=>{le(!te)},Pe=e.css`
    .remind-con {
      padding-left: ${e.polished.rem(25)};
      color: var(--dark-800);
      margin-bottom: ${e.polished.rem(60)};
      margin-top: ${e.polished.rem(19)};
      font-size: ${e.polished.rem(13)};
    }
    .modal-body {
      padding: ${e.polished.rem(30)} ${e.polished.rem(30)} 0 ${e.polished.rem(30)};
    }
    .modal-footer {
      padding: 0 ${e.polished.rem(30)} ${e.polished.rem(30)} ${e.polished.rem(30)};
    }
    .remind-title {
      font-size: ${e.polished.rem(16)};
      font-weight: 500;
    }
  `,Re=e.css`
    & {
      overflow: auto;
    }
    .text-wrap {
      overflow: hidden;
      white-space: pre-wrap;
    }
    .map-size-input {
      width: ${e.polished.rem(80)};
    }
    .setting-collapse {
      & {
        margin-bottom: ${e.polished.rem(8)};
      }
      .collapse-header {
        line-height: 2.2;
        padding-left: ${e.polished.rem(8)} !important;
        padding-right: ${e.polished.rem(8)} !important;
      }
    }
    .check-box-con {
      color: var(--dark-400);
      font-size: ${e.polished.rem(14)};
      line-height: ${e.polished.rem(22)};
      margin: ${e.polished.rem(4)} 0 ${e.polished.rem(8)} 0;
    }
  `;return(0,e.jsx)(n.SidePopper,{isOpen:p,position:"right",toggle:y,trigger:m,title:u("templateConfiguration"),backToFocusNode:v},(0,e.jsx)("div",{className:"w-100 h-100",css:Re},(()=>{var t;return(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,{flow:"wrap",label:u("templateName")},(0,e.jsx)(i.TextInput,{size:"sm",className:"w-100",value:A,onAcceptValue:ue,onChange:ce,"aria-label":u("templateName"),disabled:(null==h?void 0:h.printTemplateType)===g.OrganizationTemplate})),(0,e.jsx)(n.SettingRow,{flow:"wrap",label:u("fileFormat"),role:"group","aria-label":u("fileFormat")},(0,e.jsx)(i.MultiSelect,{fluid:!0,"aria-label":u("fileFormat"),items:(0,e.Immutable)(null==h?void 0:h.formatList.map(((e,t)=>({value:e,label:e})))),onClickItem:ke,values:(0,e.Immutable)((null==C?void 0:C.selectedFormatList)||[]),size:"sm"})),(0,e.jsx)(n.SettingRow,{flow:"wrap",label:u("printLayout")},(0,e.jsx)(i.Select,{value:null==C?void 0:C.layout,onChange:fe,size:"sm",disabled:(null==h?void 0:h.printTemplateType)===g.OrganizationTemplate,"aria-label":u("printLayout")},null===(t=null==h?void 0:h.layoutChoiceList)||void 0===t?void 0:t.map(((t,l)=>(0,e.jsx)(i.Option,{key:`layout${l}`,value:null==t?void 0:t.layoutTemplate,title:null==t?void 0:t.layoutTemplate},null==t?void 0:t.layoutTemplate))))))})(),j(null==C?void 0:C.layout)&&(0,e.jsx)(n.SettingSection,{title:u("MapOnlyOptions"),role:"group","aria-label":u("MapOnlyOptions")},(0,e.jsx)("div",{role:"group","aria-label":u("setDefaults")},(0,e.jsx)(n.SettingRow,{label:u("setDefaults"),flow:"wrap"}),(0,e.jsx)(i.CollapsablePanel,{label:u("mapSize"),isOpen:F===K.MapSize,onRequestOpen:()=>{ge(K.MapSize)},onRequestClose:he,role:"group","aria-label":u("mapSize"),rightIcon:J,type:"primary",className:F===K.MapSize&&"active-collapse"},(0,e.jsx)(n.SettingRow,{label:u("width"),className:"mt-2"},(0,e.jsx)(i.NumericInput,{className:"map-size-input",size:"sm",placeholder:u("width"),value:L||800,onAcceptValue:e=>{var t;if(!e||Number(e)<1)return z(null===(t=null==C?void 0:C.exportOptions)||void 0===t?void 0:t.width),!1;re(["exportOptions","width"],Number(e))},onChange:e=>{if(e<1)return!1;z(e)},showHandlers:!1,"aria-label":u("width")})),(0,e.jsx)(n.SettingRow,{label:u("height")},(0,e.jsx)(i.NumericInput,{className:"map-size-input",size:"sm",placeholder:u("height"),value:U||1100,onAcceptValue:e=>{var t;if(!e||Number(e)<1)return D(null===(t=null==C?void 0:C.exportOptions)||void 0===t?void 0:t.height),!1;re(["exportOptions","height"],Number(e))},onChange:e=>{D(e)},showHandlers:!1,"aria-label":u("height")}))),(0,e.jsx)(i.CollapsablePanel,{label:u("mapAttribution"),isOpen:F===K.AttributionVisible,onRequestOpen:()=>{ge(K.AttributionVisible)},onRequestClose:he,role:"group","aria-label":u("mapAttribution"),rightIcon:J,type:"primary",className:F===K.AttributionVisible&&"active-collapse"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"mt-2"},(0,e.jsx)("div",{title:u("includeAttribution"),className:"d-flex w-100 align-items-center check-box-con",onClick:e=>{const t=!(null==C?void 0:C.attributionVisible);re(["attributionVisible"],t)}},(0,e.jsx)(i.Checkbox,{title:u("includeAttribution"),className:"lock-item-ratio","data-field":"mapSize",checked:!!(null==C?void 0:C.attributionVisible)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("includeAttribution")))))),h.modeType===d.Classic&&(0,e.jsx)(n.SettingRow,{className:"mt-2",flow:"wrap",role:"group","aria-label":u("selectEditableSettings"),label:u("selectEditableSettings")},(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{title:u("printTitle"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableMapSize")}},(0,e.jsx)(i.Checkbox,{title:u("printTitle"),className:"lock-item-ratio","data-field":"mapSize",checked:(null==C?void 0:C.enableMapSize)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("mapSize")))),(0,e.jsx)("div",{className:"w-100 mt-1"},(0,e.jsx)("div",{title:u("mapAttribution"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableMapAttribution")}},(0,e.jsx)(i.Checkbox,{title:u("mapAttribution"),className:"lock-item-ratio","data-field":"mapSize",checked:(null==C?void 0:C.enableMapAttribution)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("mapAttribution")))))),!j(null==C?void 0:C.layout)&&(()=>{var t,l,o,a,s,r,c,p;return(0,e.jsx)(n.SettingSection,{title:u("LayoutOptions"),role:"group","aria-label":u("LayoutOptions")},(0,e.jsx)("div",{role:"group","aria-label":u("setDefaults")},(0,e.jsx)(n.SettingRow,{label:u("setDefaults"),flow:"wrap"}),(null==C?void 0:C.hasAuthorText)&&(0,e.jsx)(i.CollapsablePanel,{label:u("printTemplateAuthor"),isOpen:F===K.Author,onRequestOpen:()=>{ge(K.Author)},onRequestClose:he,role:"group","aria-label":u("printTemplateAuthor"),type:"primary",rightIcon:J,className:"mb-2"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"mt-2"},(0,e.jsx)(i.TextInput,{size:"sm",className:"w-100",value:Z,onAcceptValue:pe,onChange:de,"aria-label":u("printTemplateAuthor")}))),(null==C?void 0:C.hasCopyrightText)&&(0,e.jsx)(i.CollapsablePanel,{label:u("copyright"),isOpen:F===K.Copyright,onRequestOpen:()=>{ge(K.Copyright)},onRequestClose:he,role:"group","aria-label":u("copyright"),rightIcon:J,type:"primary",className:"mb-2"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"mt-2"},(0,e.jsx)(i.TextInput,{size:"sm",className:"w-100",value:B,onAcceptValue:ve,onChange:me,"aria-label":u("copyright")}))),(null==C?void 0:C.hasLegend)&&(0,e.jsx)(i.CollapsablePanel,{label:u("legend"),isOpen:F===K.Legend,onRequestOpen:()=>{ge(K.Legend)},onRequestClose:he,role:"group",type:"primary","aria-label":u("legend"),rightIcon:J,className:"mb-2"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"mt-2"},(0,e.jsx)("div",{title:u("includeLegend"),className:"d-flex w-100 align-items-center check-box-con",onClick:Se},(0,e.jsx)(i.Checkbox,{title:u("includeLegend"),className:"lock-item-ratio",checked:Ie()}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("includeLegend"))))),(0,e.jsx)(i.CollapsablePanel,{label:u("scaleBarUnit"),isOpen:F===K.ScaleBarUnit,onRequestOpen:()=>{ge(K.ScaleBarUnit)},onRequestClose:he,role:"group","aria-label":u("scaleBarUnit"),rightIcon:J,type:"primary",className:F===K.ScaleBarUnit&&"active-collapse"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"mt-2"},(0,e.jsx)(i.Select,{value:null===(t=null==C?void 0:C.layoutOptions)||void 0===t?void 0:t.scalebarUnit,onChange:xe,size:"sm","aria-label":u("scaleBarUnit")},function(e){return[{value:"Miles",label:e("unitsLabelMiles")},{value:"Kilometers",label:e("unitsLabelKilometers")},{value:"Meters",label:e("unitsLabelMeters")},{value:"Feet",label:e("unitsLabelFeet")}]}(u).map(((t,l)=>(0,e.jsx)(i.Option,{key:`unit${l}`,value:t.value,title:t.label},t.label)))))),(null===(o=null===(l=null==C?void 0:C.layoutOptions)||void 0===l?void 0:l.customTextElements)||void 0===o?void 0:o.length)>0&&(()=>{const t=[];return null==W||W.forEach(((l,o)=>{var a;for(const s in l){const r=(0,e.jsx)(i.CollapsablePanel,{label:s,key:`${s}_${o}`,isOpen:(null===(a=null==X?void 0:X[o])||void 0===a?void 0:a[s])||!1,onRequestOpen:()=>{je(s,o)},onRequestClose:he,role:"group","aria-label":s,rightIcon:J,type:"primary",className:X[s]&&"active-collapse"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"align-item-center mt-2"},(0,e.jsx)(i.TextInput,{size:"sm",className:"flex-grow-1",value:l[s]||"","aria-label":s,onAcceptValue:e=>{Ce(o,s,e)},onChange:e=>{Ne(o,s,e)}})));t.push(r)}})),t})(),ie&&(0,e.jsx)(i.CollapsablePanel,{label:u("northArrow"),isOpen:F===K.NorthArrow,onRequestOpen:()=>{ge(K.NorthArrow)},onRequestClose:he,role:"group",type:"primary","aria-label":u("northArrow"),rightIcon:J,className:"mb-2"},(0,e.jsx)(n.SettingRow,{flow:"wrap",className:"mt-2"},(0,e.jsx)("div",{title:u("includeNorthArrow"),className:"d-flex w-100 align-items-center check-box-con",onClick:Oe},(0,e.jsx)(i.Checkbox,{title:u("includeNorthArrow"),className:"lock-item-ratio",checked:null===(r=null===(s=null===(a=null==C?void 0:C.layoutOptions)||void 0===a?void 0:a.elementOverrides)||void 0===s?void 0:s[ie])||void 0===r?void 0:r.visible}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("includeNorthArrow")))))),h.modeType===d.Classic&&(0,e.jsx)(n.SettingRow,{className:"mt-2",flow:"wrap",role:"group","aria-label":u("selectEditableSettings"),label:u("selectEditableSettings")},(0,e.jsx)("div",{className:"w-100"},(null==C?void 0:C.hasAuthorText)&&(0,e.jsx)("div",{title:u("printTemplateAuthor"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableAuthor")}},(0,e.jsx)(i.Checkbox,{title:u("printTemplateAuthor"),className:"lock-item-ratio",checked:(null==C?void 0:C.enableAuthor)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("printTemplateAuthor"))),(null==C?void 0:C.hasCopyrightText)&&(0,e.jsx)("div",{title:u("copyright"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableCopyright")}},(0,e.jsx)(i.Checkbox,{title:u("copyright"),className:"lock-item-ratio",checked:(null==C?void 0:C.enableCopyright)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("copyright"))),(null==C?void 0:C.hasLegend)&&(0,e.jsx)("div",{title:u("legend"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableLegend")}},(0,e.jsx)(i.Checkbox,{title:u("legend"),className:"lock-item-ratio",checked:(null==C?void 0:C.enableLegend)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("legend"))),(0,e.jsx)("div",{title:u("scaleBarUnit"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableScalebarUnit")}},(0,e.jsx)(i.Checkbox,{title:u("scaleBarUnit"),className:"lock-item-ratio",checked:(null==C?void 0:C.enableScalebarUnit)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("scaleBarUnit"))),(null===(p=null===(c=null==C?void 0:C.layoutOptions)||void 0===c?void 0:c.customTextElements)||void 0===p?void 0:p.length)>0&&(()=>{const t=[];return null==W||W.forEach(((l,n)=>{var o,a;for(const s in l){const l=(0,e.jsx)("div",{key:`${s}_${n}`,title:s,className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{Te(s,n)}},(0,e.jsx)(i.Checkbox,{title:s,className:"lock-item-ratio",checked:(null===(a=null===(o=null==C?void 0:C.customTextElementEnableList)||void 0===o?void 0:o[n])||void 0===a?void 0:a[s])||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},s));t.push(l)}})),t})(),ie&&(0,e.jsx)("div",{title:u("northArrow"),className:"d-flex w-100 align-items-center check-box-con",onClick:()=>{ye("enableNorthArrow")}},(0,e.jsx)(i.Checkbox,{title:u("northArrow"),className:"lock-item-ratio",checked:(null==C?void 0:C.enableNorthArrow)||!1}),(0,e.jsx)("div",{className:"lock-item-ratio-label text-left ml-2"},u("northArrow"))))))})(),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,{className:"mb-3",label:u("overrideCommonSettings")},(0,e.jsx)(i.Switch,{"aria-label":u("overrideCommonSettings"),checked:(null==C?void 0:C.overrideCommonSetting)||!1,onChange:e=>{e.target.checked?we():Me()}})),(null==C?void 0:C.overrideCommonSetting)&&(0,e.jsx)(H,{id:c,printTemplateProperties:C,handleTemplatePropertyChange:e=>{const t=null==P?void 0:P.asMutable({deep:!0});t[k]=null==e?void 0:e.asMutable({deep:!0}),w(t)},modeType:null==h?void 0:h.modeType,jimuMapView:f}),(0,e.jsx)(i.AlertPopup,{isOpen:te,toggle:Me,hideHeader:!0,onClickOk:we,onClickClose:Me,css:Pe},(0,e.jsx)("div",{className:"align-middle pt-2 remind-title d-flex align-items-center"},(0,e.jsx)("div",{className:"mr-1"},(0,e.jsx)(G,{className:"align-middle",size:"l",color:"var(--warning-600)"})),(0,e.jsx)("span",{className:"align-middle flex-grow-1"},u("overrideSettingsTitle"))),(0,e.jsx)("div",{className:"remind-con"},u("overrideSettingsRemind"))))))};var X=p(52785);const ee=(t,l)=>{return i=void 0,n=void 0,a=function*(){return(i=t,y(void 0,void 0,void 0,(function*(){return e.UtilityManager.getInstance().getUrlOfUseUtility(i).then((e=>Promise.resolve(e)))}))).then((e=>te(e,t,l)));var i},new((o=void 0)||(o=Promise))((function(e,t){function l(e){try{r(a.next(e))}catch(e){t(e)}}function s(e){try{r(a.throw(e))}catch(e){t(e)}}function r(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(l,s)}r((a=a.apply(i,n||[])).next())}));var i,n,o,a},te=(t,l,i)=>{const n=oe(null==l?void 0:l.utilityId);return P(t).then((o=>{let a=i;const s=(null==o?void 0:o.templates)?((t,l,i)=>((e,t,l)=>{const i=w(t,l);return e.map(((e,t)=>(e.templateId=`config_${i}_${t}`,e)))})(t.map((t=>{var l;let i=(0,e.Immutable)(t);return i=i.set("layout",null==t?void 0:t.layout),i=i.setIn(["layoutOptions","scalebarUnit"],"Miles").setIn(["layoutOptions","legendLayers"],null),j(null==i?void 0:i.layout)&&(i=i.set("exportOptions",Object.assign({width:800,height:1100},null==t?void 0:t.exportOptions))),null===(l=S((0,e.Immutable)(c),(0,e.Immutable)(i)))||void 0===l?void 0:l.asMutable({deep:!0})})),l,i))(null==o?void 0:o.templates,n,null==i?void 0:i.printTemplateType):[],r=null==s?void 0:s.map((e=>{var t;return(null==e?void 0:e.layout)&&(e.layout=null==e?void 0:e.layout),(null==e?void 0:e.format)&&(e.format=null===(t=null==e?void 0:e.format)||void 0===t?void 0:t.toLowerCase()),e}));return function(t){const l={query:{"env:outSR":"","env:processSR":"",returnZ:!1,returnM:!1,returnTrueCurves:!1,returnFeatureCollection:!1,context:"",f:"json"},responseType:"json"};return function(t){var l;if(!t)return Promise.resolve(null);const i=`${null===(l=t.split("/GPServer"))||void 0===l?void 0:l[0]}/GPServer`,n={query:{f:"json"},responseType:"json"};return(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{const[t]=e;return t(i,n).then((e=>{var t,l;const n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.tasks,o=null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.executionType,a=o===f.SynchronousExecute?"execute":"submitJob";let s=null,r=null;return null==n||n.forEach((e=>{(null==e?void 0:e.includes("Templates"))&&(s=`${i}/${e}`,r=`${i}/${e}/${a}`)})),Promise.resolve({templatesInfoTaskUrl:s,url:r,executionType:o})}))}))}(t).then((t=>{const{url:i,executionType:n,templatesInfoTaskUrl:o}=t;return i?(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{const[t]=e;return t(i,l).then((e=>{var i,a,s;if(n===f.AsynchronousSubmit){const n=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.jobId;return t(`${o}/jobs/${n}/results/Output_JSON`,l).then((e=>{var t;return Promise.resolve((null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.value)||[])}))}return Promise.resolve((null===(s=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.results[0])||void 0===s?void 0:s.value)||[])}))})):Promise.resolve(null)}))}(t).then((e=>{const t=le(e,r),i=ne(null==o?void 0:o.templates,t);return a=a.set("printCustomTemplate",t).set("useUtility",l).set("formatList",null==o?void 0:o.formatList).set("defaultFormat",null==o?void 0:o.defaultFormat).set("layoutChoiceList",i),Promise.resolve(a)}))}))},le=(e,t)=>null==t?void 0:t.map((t=>{var l,i,n,o,a,s,r;let c;e&&0!==(null==e?void 0:e.length)?e.forEach((e=>{t.label===e.layoutTemplate&&(c=e)})):c=u,(null==c?void 0:c.webMapFrameSize)&&(t.mapFrameSize=null==c?void 0:c.webMapFrameSize,t.mapFrameUnit=null==c?void 0:c.pageUnits);const d=null===(i=null===(l=null==c?void 0:c.layoutOptions)||void 0===l?void 0:l.customTextElements)||void 0===i?void 0:i.map((e=>{const t={};for(const l in e)t[l]=!0;return t})),p=ie(null==c?void 0:c.layoutOptions);return t.mapFrameUnit=null==c?void 0:c.pageUnits,t.hasAuthorText=null===(n=null==c?void 0:c.layoutOptions)||void 0===n?void 0:n.hasAuthorText,t.hasCopyrightText=null===(o=null==c?void 0:c.layoutOptions)||void 0===o?void 0:o.hasCopyrightText,t.hasLegend=null===(a=null==c?void 0:c.layoutOptions)||void 0===a?void 0:a.hasLegend,t.hasTitleText=null===(s=null==c?void 0:c.layoutOptions)||void 0===s?void 0:s.hasTitleText,t.selectedFormatList=[null==t?void 0:t.format],t.layoutOptions.customTextElements=(null===(r=null==c?void 0:c.layoutOptions)||void 0===r?void 0:r.customTextElements)||[],t.layoutOptions.elementOverrides=p,t.customTextElementEnableList=d||[],t.enableNorthArrow=!!N(p),t})),ie=e=>{const t=(null==e?void 0:e.mapSurroundInfos)||[],l=null==t?void 0:t.find((e=>e.type===`${o}`)),i={};return l&&(i[null==l?void 0:l.name]=l),(null==e?void 0:e.elementOverrides)||i},ne=(e,t)=>(null==e?void 0:e.map((e=>(e.layoutTemplate=null==e?void 0:e.layout,null==t||t.forEach((t=>{(null==e?void 0:e.layout)===(null==t?void 0:t.layout)&&(e.mapFrameSize=null==t?void 0:t.mapFrameSize,e.mapFrameUnit=null==t?void 0:t.mapFrameUnit,e.hasAuthorText=null==t?void 0:t.hasAuthorText,e.hasCopyrightText=null==t?void 0:t.hasCopyrightText,e.hasLegend=null==t?void 0:t.hasLegend,e.hasTitleText=null==t?void 0:t.hasTitleText)})),e))))||[],oe=t=>{const l=e.UtilityManager.getInstance().getUtilityJson(t);return"org"===(null==l?void 0:l.source)?v.OrganizationService:v.Customize};const{useState:ae,useEffect:se,useRef:re}=e.React,ue=t=>{const l=re(!1),o=e.hooks.useTranslation(x,i.defaultMessages),{config:a,id:s,onSettingChange:r,toggleLoading:u,toggleRemindPopper:c}=t,[d,p]=ae(null==a?void 0:a.useUtility),m=e.css`
    &>div>div {
      padding-left: 0!important;
      padding-right: 0!important;
    }
    .utility-list {
      margin-bottom: 0 !important;
    }
  }`;se((()=>{p(null==a?void 0:a.useUtility)}),[a]);const v=()=>{let e=a;e=e.set("useUtility",null),p(null),u(!1),r({id:s,config:e,useUtilities:[]})},g=e=>{return t=void 0,i=void 0,o=function*(){u(!0),ee(e,a).then((t=>{if(l.current)return!1;u(!1),r({id:s,config:t,useUtilities:e?[e]:[]})}),(e=>{v(),u(!1),c(!0)}))},new((n=void 0)||(n=Promise))((function(e,l){function a(e){try{r(o.next(e))}catch(e){l(e)}}function s(e){try{r(o.throw(e))}catch(e){l(e)}}function r(t){var l;t.done?e(t.value):(l=t.value,l instanceof n?l:new n((function(e){e(l)}))).then(a,s)}r((o=o.apply(t,i||[])).next())}));var t,i,n,o};return(0,e.jsx)("div",{css:m},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:o("printService"),role:"group","aria-label":o("printService")},(0,e.jsx)(X.UtilitySelector,{useUtilities:(0,e.Immutable)(d?[d]:[]),onChange:e=>{const t=e[0];p(t),t?(l.current=!1,g(t)):(l.current=!0,v())},showRemove:!0,closePopupOnSelect:!0,type:e.SupportedUtilityType.Printing})))},{useState:ce,useRef:de}=e.React,pe=t=>{const l=de(null),o=de(null),{config:a,id:s,jimuMapView:r,showLoading:u,className:d,onSettingChange:p,handlePropertyChange:m,toggleRemindPopper:v,toggleLoading:h}=t,b=e.hooks.useTranslation(x,i.defaultMessages),f=e.css`
    .radio-con {
      cursor: pointer;
    }
    .loading-con {
      height: ${e.polished.rem(100)};
    }
  `,[y,j]=ce(null),[T,C]=ce(null),[N,O]=ce(!0),k=(e,t)=>{var i,n;if(e===y)j(null);else{const o=null===(n=null===(i=l.current)||void 0===i?void 0:i.getElementsByClassName("jimu-tree-item__body"))||void 0===n?void 0:n[t];j(e),o&&C(o)}},P=e=>{const t=I(null==a?void 0:a.printServiceType,null==a?void 0:a.printTemplateType);m(t?"printCustomTemplate":"printOrgTemplate",e)},R=()=>{O(!N)};return(0,e.jsx)(n.SettingSection,{className:d,css:f,role:"group","aria-label":b("configurePrintTemplate")},(0,e.jsx)(i.CollapsablePanel,{label:b("configurePrintTemplate"),isOpen:N,onRequestOpen:R,onRequestClose:R,"aria-label":b("configurePrintTemplate"),className:"custom-setting-collapse"},(0,e.jsx)(ue,{id:s,config:a,showLoading:u,onSettingChange:p,toggleLoading:h,toggleRemindPopper:v}),u&&(0,e.jsx)("div",{className:"loading-con position-relative"},(0,e.jsx)(i.Loading,null)),(null==a?void 0:a.useUtility)&&(0,e.jsx)("div",null,(null==a?void 0:a.printTemplateType)===g.Customize&&(0,e.jsx)(i.Button,{className:"w-100 mt-2",ref:o,type:"primary",onClick:()=>{var t,l;let i=(null===(t=null==a?void 0:a.printCustomTemplate)||void 0===t?void 0:t[0])||(0,e.Immutable)({});const n=(null===(l=null==a?void 0:a.printCustomTemplate)||void 0===l?void 0:l.asMutable({deep:!0}))||[],s=((e,t,l)=>{const i=e.map((e=>e.templateId)),n=w(t,l);return i&&0!==(null==i?void 0:i.length)?`config_${n}_${(e=>{var t;const l=null==e?void 0:e.map((e=>{var t;const l=null===(t=null==e?void 0:e.split("_"))||void 0===t?void 0:t.pop();return l?Number(l):0}));return null===(t=null==l?void 0:l.sort(((e,t)=>t-e)))||void 0===t?void 0:t[0]})(i)+1}`:`config_${n}_0`})(n,null==a?void 0:a.printServiceType,g.Customize);i=S(i,(0,e.Immutable)(c)),i=i.set("format",null==a?void 0:a.defaultFormat).set("templateId",s),n.push(null==i?void 0:i.asMutable({deep:!0})),m("printCustomTemplate",n),C(o.current),j(s)}},(0,e.jsx)(L,{className:"mr-1"}),b("newTemplate")),(0,e.jsx)("div",{ref:l},!u&&(0,e.jsx)(M,{id:s,handelActiveTemplateIdChange:k,handelTemplateListChange:P,showNewTemplateItem:!1,activeTemplateId:y,config:a})),(0,e.jsx)(Y,{id:s,isOpen:y,config:a,activeTemplateId:y,toggle:()=>{k(null)},handelTemplateListChange:P,jimuMapView:r,trigger:l.current,popperFocusNode:T}))))};var me=p(55505),ve=p(41362),ge=p(34796);const he=t=>{const l=(0,ge.getTheme2)(),o=e.hooks.useTranslation(x,i.defaultMessages),{config:s,handlePropertyChange:r}=t,u=e.css`
    .outline-con {
      input {
        width: ${e.polished.rem(55)};
      }
    }
    .preview-style-setting-con {
      margin-top: ${e.polished.rem(16)};
    }
    .enable-preview-label {
      margin-right: ${e.polished.rem(10)};
    }
  `,c=()=>{r("enablePreview",!(null==s?void 0:s.enablePreview))};return(0,e.jsx)(n.SettingSection,{css:u,role:"group",title:(0,e.jsx)("div",{className:"d-flex align-items-center",onClick:c},(0,e.jsx)("div",{className:"flex-grow-1 enable-preview-label text-truncate w-100",title:o("enablePrintPreview")},o("enablePrintPreview")),(0,e.jsx)(i.Switch,{"aria-label":o("enablePrintPreview"),checked:null==s?void 0:s.enablePreview,onChange:c,title:o("enablePrintPreview")})),"aria-label":o("printPreviewStyle")},(null==s?void 0:s.enablePreview)&&(0,e.jsx)("div",{className:"preview-style-setting-con"},(0,e.jsx)(n.SettingRow,{label:o("fill"),"aria-label":o("fill")},(0,e.jsx)(ve.ThemeColorPicker,{value:null==s?void 0:s.previewBackgroundColor,specificTheme:l,onChange:e=>{r("previewBackgroundColor",e)}})),(0,e.jsx)(n.SettingRow,{className:"outline-con",flow:"no-wrap",label:o("columnOutline"),"aria-label":o("columnOutline")},(0,e.jsx)(me.SizeColorSetting,{color:(null===(d=null==s?void 0:s.previewOutLine)||void 0===d?void 0:d.color)||a.color,size:(null===(p=null==s?void 0:s.previewOutLine)||void 0===p?void 0:p.size)||a.size,onChange:(t,l)=>{const i=null==l?void 0:l.includes("px"),n=function(e){const t=null==e?void 0:e.split("px")[0];return!(!e||!t)&&Number(t)>=0}(l);if(i&&!n)return;const o=(null==s?void 0:s.previewOutLine)||(0,e.Immutable)(a);r("previewOutLine",o.setIn([t],l))}}))));var d,p};var be=p(748),xe=p.n(be);const fe=t=>{const l=window.SVG,{className:i}=t,n=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(l[i[n]]=e[i[n]])}return l}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",i);return l?e.React.createElement(l,Object.assign({className:o,src:xe()},n)):e.React.createElement("svg",Object.assign({className:o},n))},ye=()=>{const t=e.hooks.useTranslation(x,i.defaultMessages),l=e.css`
    & {
      & {
        color: var(--dark-200);
      }
      p {
        color: var(--dark-500);
        font-size: ${e.polished.rem(14)};
        margin: ${e.polished.rem(16)} auto 0;
        line-height: ${e.polished.rem(19)};
        width: ${e.polished.rem(228)};
      }
    }
  `;return(0,e.jsx)("div",{className:"w-100 mt-3 text-center utility-placeholder",css:l},(0,e.jsx)("div",{className:"text-center w-100"},(0,e.jsx)(fe,{size:48}),(0,e.jsx)("p",{className:"text-Secondary",id:"list-empty-tip",title:t("utilityPlaceholder")},t("utilityPlaceholder"))))},{useEffect:we,useRef:Se}=e.React,Ie={width:"360px",height:"460px"},je={width:"40px",height:"40px"},Te=o=>{const{config:a,id:s,portalUrl:r,onSettingChange:u,useMapWidgetIds:c}=o,m=e.hooks.useTranslation(x,i.defaultMessages),v=Se(null),g=e.ReactRedux.useSelector((e=>{var t,l;return null===(l=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.widgetsState[s])||void 0===l?void 0:l.layoutInfo})),h=e.ReactRedux.useSelector((e=>e.appStateInBuilder.appConfig)),[b,f]=e.React.useState(null),[y,w]=e.React.useState(!1),[S,I]=e.React.useState(!1),[j,T]=e.React.useState(!1),C=e.css`
    & .custom-setting-collapse>div.collapse-header {
      padding-left: 0 !important;
      padding-right: 0 !important;
    }
    .no-utility-setting {
      border-bottom: none;
    }
    .select-mode-con {
      &>div {
        flex: 1;
      }
      button {
        height: ${e.polished.rem(80)};
        background: var(--light-200);
        border: 2px solid transparent;
        &:not(:disabled):not(.disabled).active {
          border-color: var(--primary);
          background: var(--light-200);
        }
      }
      img {
        width: 100%;
        height: 100%;
        margin: 0 auto;
      }
    }
    .remind-con {
      top: ${e.polished.rem(90)};
    }
    .text-wrap {
      overflow: hidden;
      white-space: pre-wrap;
    }
    .setting-collapse {
      & {
        margin-bottom: ${e.polished.rem(8)};
      }
      .collapse-header {
        line-height: 2.2;
        padding-left: ${e.polished.rem(8)} !important;
        padding-right: ${e.polished.rem(8)} !important;
      }
      .handle{
        height: ${e.polished.rem(32)};
        background: var(--light-500);
        padding-left: ${e.polished.rem(8)};
        padding-right: ${e.polished.rem(8)};
      }
    }
  `;we((()=>{N()}),[a]);const N=()=>{var e,t;const i=null===(t=null===(e=null==h?void 0:h.widgets)||void 0===e?void 0:e[s])||void 0===t?void 0:t.style;if(!(null==a?void 0:a.hasInitBorder)&&!(null==i?void 0:i.border)){const e=(0,l.getAppConfigAction)(),t={color:"var(--light-400)",type:"solid",width:"1px"};let n;n=i?i.set("border",t):{border:t};const o=null==a?void 0:a.set("hasInitBorder",!0);e.editWidgetProperty(s,"style",n).editWidgetProperty(s,"config",o).exec()}},O=(e,t)=>{if((null==a?void 0:a[e])===t)return!1;const l=a.setIn([e],t);u({id:s,config:l})},k=(e=!1)=>{w(e),e&&(clearTimeout(v.current),v.current=setTimeout((()=>{w(!1)}),5e3))},M=t=>{var i;const n=a.setIn(["modeType"],t),o=(0,l.getAppConfigAction)();let r=Ie;if(t===d.Compact&&(r=je),P()===e.LayoutType.FixedLayout){const{layoutId:e,layoutItemId:t}=g,l=h.layouts[e],a=(null===(i=null==l?void 0:l.content)||void 0===i?void 0:i[t]).bbox.set("width",r.width).set("height",r.height);o.editLayoutItemProperty(g,"bbox",a).editWidgetProperty(s,"config",n).exec()}else o.editWidgetProperty(s,"config",n).exec()},P=()=>{var e,t;const l=null==g?void 0:g.layoutId;return null===(t=null===(e=null==h?void 0:h.layouts)||void 0===e?void 0:e[l])||void 0===t?void 0:t.type},R=()=>{I(!S)};return(0,e.jsx)("div",{className:"widget-setting-search jimu-widget-search",css:C},(0,e.jsx)(n.SettingSection,{className:"map-selector-section",role:"group","aria-label":m("printSource"),title:m("printSource")},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:m("selectMap"),role:"group","aria-label":m("selectMap")},(0,e.jsx)(n.MapWidgetSelector,{onSelect:e=>{u({id:s,useMapWidgetIds:e})},"aria-label":m("selectMap"),useMapWidgetIds:c})),(0,e.jsx)("div",{className:"fly-map"},(0,e.jsx)("div",null,(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:null==c?void 0:c[0],onActiveViewChange:e=>{null==e||"3d"===e.view.type?f(null):(null==e?void 0:e.id)!==(null==b?void 0:b.id)&&f(e)}})))),(0,e.jsx)(n.SettingSection,{className:"map-selector-section"},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:m("printMode"),role:"group","aria-label":m("printMode")},(0,e.jsx)("div",{className:"d-flex w-100 select-mode-con"},(0,e.jsx)("div",{className:"flex-grow-1 text-truncate"},(0,e.jsx)(i.Button,{className:"w-100",title:m("printClassic"),active:(null==a?void 0:a.modeType)===d.Classic,onClick:()=>{M(d.Classic)}},(0,e.jsx)(i.Icon,{autoFlip:!0,icon:p(69797)})),(0,e.jsx)("div",{className:"mt-1 w-100 text-center text-truncate",title:m("printClassic")},m("printClassic"))),(0,e.jsx)("div",{className:"flex-grow-1 ml-2 text-truncate"},(0,e.jsx)(i.Button,{className:"w-100",active:(null==a?void 0:a.modeType)===d.Compact,title:m("printCompact"),onClick:()=>{M(d.Compact)}},(0,e.jsx)(i.Icon,{autoFlip:!0,icon:p(80941)})),(0,e.jsx)("div",{className:"mt-1 text-center text-truncate",title:m("printCompact")},m("printCompact")))))),(0,e.jsx)("div",{className:"w-100 position-absolute remind-con"},(0,e.jsx)(i.Alert,{withIcon:!0,form:"basic",type:"warning",open:y,closable:!0,className:"w-100",text:m("serviceIsNotAvailable"),onClose:()=>{k(!1)}})),(0,e.jsx)(pe,{id:s,config:a,portalUrl:r,handlePropertyChange:O,onSettingChange:u,jimuMapView:b,toggleRemindPopper:k,showLoading:j,toggleLoading:e=>{T(e)},className:!(null==a?void 0:a.useUtility)&&!j&&"no-utility-setting"}),(null==a?void 0:a.useUtility)&&(0,e.jsx)(n.SettingSection,{role:"group","aria-label":m("templateCommonSettings")},(0,e.jsx)(i.CollapsablePanel,{label:m("templateCommonSettings"),isOpen:S,onRequestOpen:R,onRequestClose:R,"aria-label":m("templateCommonSettings"),className:"custom-setting-collapse"},(0,e.jsx)(H,{id:s,printTemplateProperties:null==a?void 0:a.commonSetting,handleTemplatePropertyChange:e=>{const t=a.set("commonSetting",e);u({id:s,config:t})},modeType:null==a?void 0:a.modeType,jimuMapView:b}))),(null==a?void 0:a.useUtility)&&(0,e.jsx)(he,{config:a,handlePropertyChange:O}),!(null==a?void 0:a.useUtility)&&!j&&(0,e.jsx)(ye,null))};function Ce(e){p.p=e}})(),m})())}}}));