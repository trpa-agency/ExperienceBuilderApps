System.register(["jimu-core","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui","jimu-theme"],(function(e,t){var s={},i={},a={},n={},o={};return{setters:[function(e){s.Immutable=e.Immutable,s.LinkType=e.LinkType,s.React=e.React,s.css=e.css,s.defaultMessages=e.defaultMessages,s.hooks=e.hooks,s.jsx=e.jsx,s.polished=e.polished},function(e){i.getAppConfigAction=e.getAppConfigAction},function(e){a.LinkSelector=e.LinkSelector,a.OpenTypes=e.OpenTypes,a.SearchDataSetting=e.SearchDataSetting,a.SearchDataType=e.SearchDataType,a.SearchGeneralSetting=e.SearchGeneralSetting,a.SearchServiceType=e.SearchServiceType,a.SearchSuggestionSetting=e.SearchSuggestionSetting,a.SettingRow=e.SettingRow,a.SettingSection=e.SettingSection},function(e){n.Button=e.Button,n.Checkbox=e.Checkbox,n.CollapsablePanel=e.CollapsablePanel,n.Icon=e.Icon,n.Switch=e.Switch,n.TextInput=e.TextInput,n.defaultMessages=e.defaultMessages},function(e){o.useTheme=e.useTheme}],execute:function(){e((()=>{var e={40151:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANgAAACQCAYAAABqK6XsAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAS6SURBVHgB7d2/ThRdGMDh4xcTLdSYKI02SmJEC62kstIbsLLzBrwgb8DOyhvQykob/yQGtZAGGiAkQAEJCV/eTSbffKPiEnjPzLDPk2wBDIVhf845Z8+eLQUAAAAAAAAAAAAAAACAMThTjun58+cHBU6pFy9eHKuRfwqQRmCQSGCQ6Gw5YW/fvi0wrUePHpXTzB0MEgkMEgkMEp34HAyy7e3tlW/fvpWVlZWyvr5etre3J9+/cuVKuXTpUpmfny+3b98uQyAwRuXnz5+ThbSIrGtjY2PyiGvev39fFhcXew9NYIzGu3fvyufPn6e6Nu5qb968KVtbW+XBgwelL+ZgjMKHDx+mjqv7exFmX9zBGLylpaVJKG3nzp0r9+7dK9evXy/Xrl2bfC+Ghx8/fpzMz9oizLju5s2bpTZ3MAavG9fFixfL06dPJ0O/Jq4QixyPHz8uz549m1zT9qd5WzaBMWhx92pWCRtPnjz5JaC2+FlcE3e5RrPyWJvAGLRYEWxbWFg4NK5GXBNDyLbV1dVSm8AYtFgFbLt//36ZVsy72tbW1kptAmPQYuGiLeZZ02rPz0J3qFmDwCCRwBi07nzrKPOo2EbVdvXq1VKbwBi0bhSx/3Banz59+t/XsU+xNoExaN2FinjReJq5VFzTXZb3QjN0xGbd7utZr1+/PjSy+Flc0xZDzT42/gqMQYu4uscKREAvX76c7M5oz7Ni+Bi7Pl69evVLgH3cvYK9iAxexBEvGnc3+8Yuj3hMI353bm6u+l3MHYxRePjw4bHfdhJvX6m9XUpgjEYEFsPFabZKNbvtu2pHZojIqMRexHjE0DD2KcZcq5mHRXixrB8rj83iSHzdPUowIgs1hosCY5Sa0Ka5LvQVmSEip15E9rsDTuPcjuz3iAmMmdCN7HfvGctgiMjMaIaL8VrZ3960eVIExkyZdu52UgwRIZHAIJHAINGJz8FO++c9wVG4g0EigUEigQEAAAAAAABwJGfKMS0sLBwUOKWWlpaO1YidHJBIYJBIYJBIYJBIYJBIYJBIYJBIYJBIYJBIYJBIYJCo6tn058+fL3fv3i0XLlwoZ886Fn/o4oPtvn//XnZ3d8uYxGc6HxwclOXl5dK3as/yiGtxcVFYIxKfDnn58uXJ52iNJbKIKx6NviOrNkS8deuWuEYo/mZ37twpY9CNa35+vty4caP0qVpgc3NzhXGq8Tlax9WNq9F3ZNUC29/fL4zT0Ecef4qr0Wdk1QLb2dkpjNPa2loZqr/F1egrsmqBff361V1shOJv9uPHjzJE08bV6COyaoHFKlSsRg35f0P+E2Ftbm4OdgXxqHE1akfmTA44hDM5YMAEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBokEBomcTc/MqXnmfrU7WHM2fZx1Li76FGfux3MxnpPZnE3PTKp15r6z6ZlZNc7cdzY9M6vGiMrZ9MysGqdMO5uemVTrzH1n0zNTap+5X3VZL/5BX758KTAr7OSARAKDRAKDRAKDRAKDRAKDRAKDRAKDRAKDRAKDRAKDRAKDRAKDRAKDRAIDAAAAAAAAAAAAAAAAAGbevzK1giHhU5jTAAAAAElFTkSuQmCC"},17568:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANgAAACQCAYAAABqK6XsAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPWSURBVHgB7d0/L2VpHMDxx2ZDg2yChoaKSrIFFQ0VlYpGs+3t9s3ceBlUOtmCSrNR0bANFcmEigTrdzc2d87c68/wHOfw+SQTxpyZKOab5zm/89wrJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIoye9UaPRuE/wSTWbzTc18ksCshEYZCQwyOjX9M52dnYS/KyFhYX0mVjBICOBQUbvvkWEMl1dXaXT09PWx0ejo6NpeHg49fX1pY8mMGopotrf309nZ2ddr5mamkozMzNpYGAgfRSBUSvX19etQdrJycmz1x4eHraui8imp6fTRxAYtRFxbW5upouLi1f9nd3d3dbHCK1sAqM2YuXqFNfY2FgaGhpq3XNdXl62to3t92QhtpODg4NpcnIylUlg1MLjdq9dRDU/P98aanS6fm9vr7VyPYqVbHx8vNThhzE9tRArULuIa2VlpWNcIQYc8eftMUVsBwcHqUwCo/KKY/iwvLz87EoUERaHG7GylUlgVF5xFB+r00tH7xFYe4gRajHWnARG5RWDiIfILxVx9ff3P/nv5SQwaqe3t/dV18f0sF374CM3gVE7Nzc3r7q+GJQpIrQpbgmPj4/TS8V2sHgPF8OPsgiMyisG1ulBcjfFqWEMR6xg0CaedRWfd8WRqeciiwfTxedns7OzqUwCoxaKYURcEVk8IyuKe64Ia3t7+7uvx+rV7cF0Lo5KUQsRRpwjPDo6+v9rEdnW1lbrnirOI8bWL74WK1enSWEMR147IHkrgVEbc3Nz6fz8/IcDv/H7l5ywfzyNH0eoyhp02CJSG7FCra2tveq1XcWBxs+85OUtBEbtxEq2urqaJiYmul4TYcXrv9bX1394HViZkdkiUksxul9aWmrFEqHE1jE+j0HGyMjId1vAx8DaJ4plbRcFRq3FStVpjF/0VGSxGuZ63w5bRL6MiKy4XYwXYOZ8UxyB8aW0RxZj/8XFxZSTLSJfTgQW93BPDUneixWML6mMuILAICOBQUYCg4zefcjx2X6+E7yFFQwyEhhkJDDIqCeRVaPRuE8V1mw2/R/IyAoGGTkqVVFx6rv4hi3ddDrESjVYwSrqpdGIq9oEVmHPxSOu6hNYxXWLSFz1ILAaKMYkrvow5KiJYmDUg8Dy+/bw67f0DoRVP7aImfX09PydKur+/n4zkZXAMru9vf0j/beKVc23h8D+TGQlsMw2Njb+ubu7+/3h06qsFhHWX/E9xfeWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgA/zLw+hTkb8BAWHAAAAAElFTkSuQmCC"},48891:e=>{"use strict";e.exports=s},23137:e=>{"use strict";e.exports=i},34796:e=>{"use strict";e.exports=o},30726:e=>{"use strict";e.exports=n},77756:e=>{"use strict";e.exports=a}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var l={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(l),r.d(l,{__set_webpack_public_path__:()=>p,default:()=>h});var e,t,s,i,a=r(48891),n=r(23137),o=r(77756);!function(e){e.ResultPanel="Result_Panel",e.OtherWidgets="Other_Widgets"}(e||(e={})),function(e){e.Style1="Style1",e.Style2="Style2"}(t||(t={})),function(e){e.Classic="Classic",e.Compact="Compact"}(s||(s={})),function(e){e.None="",e.Init="init",e.Loading="loading",e.Loaded="loaded",e.Warning="warning",e.Error="error"}(i||(i={}));var c=r(30726);const A={searchResult:"Search result",arrangementStyle:"Arrangement style",showSearchResult:"Show search results in",resultPanel:"Result panel",otherWidgets:"Other widgets",autoSelect:"Auto select the first result",redirectSearchResult:"Redirect if search result is not empty",notSetCorrectle:"The search or display field is not set correctly.",selectedField:"{fieldNumber} Selected",searchExample:"Example: {url}",locatorSourceErrorHint:"The URL you entered is invalid or inaccessible",locatorUrlError:"Locator URL is not set correctly",maximumResults:"Maximum display results per source",outputDsLabel:"{label} result",searchBoxTip:"Search box",searchIconTip:"Search icon",searchClassic:"Classic",searchCompact:"Compact"};var u=r(34796);const g=e=>{const t=a.css`
    .active {
      .style-img {
        border-color: var(--primary-600);
      }
    }
    .style-img {
      border: 2px solid var(--secondary-200);
    }
    &>div {
      flex: 1;
    }
    & button, & button:hover, & button.active {
      background-color: var(--secondary-200) !important;
    }
    & button {
      width: ${a.polished.rem(108)};
      height: ${a.polished.rem(78)};
      padding: 0;
    }
    .title {
      font-size: ${a.polished.rem(13)};
      line-height: ${a.polished.rem(18)};
      margin-top: ${a.polished.rem(6)};
      color: var(--dark-600);
    }
  `,i=a.hooks.useTranslation(A,c.defaultMessages,a.defaultMessages),{config:n,id:l,onSettingChange:u}=e,{searchResultStyle:g}=n,d=e=>{u({id:l,config:n.set("searchResultStyle",e)})};return(0,a.jsx)(o.SettingRow,{flow:"wrap",label:i("style"),role:"group","aria-label":i("style")},(0,a.jsx)("div",{className:"d-flex justify-content-between w-100",css:t},(0,a.jsx)("div",null,(0,a.jsx)(c.Button,{type:"tertiary",className:g===s.Classic?"active":"",title:i("searchClassic"),onClick:()=>{d(s.Classic)}},(0,a.jsx)(c.Icon,{className:"style-img w-100 h-100",icon:r(40151)})),(0,a.jsx)("div",{className:"title text-center"},i("searchClassic"))),(0,a.jsx)("div",null,(0,a.jsx)(c.Button,{type:"tertiary",className:g===s.Compact?"active":"",title:i("searchCompact"),onClick:()=>{d(s.Compact)}},(0,a.jsx)(c.Icon,{className:"style-img w-100 h-100",icon:r(17568)})),(0,a.jsx)("div",{className:"title text-center"},i("searchCompact")))))},d=t=>{const s=a.hooks.useTranslation(A,c.defaultMessages,a.defaultMessages),i=(0,u.useTheme)(),n=a.css`
    .check-box-label {
      color: ${i.colors.palette.dark[800]}
    }
    .search-setting-con {
      padding-left: 0;
      padding-right: 0;
    }
    .divider-line {
      padding-bottom: 0;
    }
    .checkbox-con .jimu-widget-setting--row-label{
      max-width: 100%;
    }
    .cursor-pointer {
      cursor: pointer;
    }
  `,{config:r,id:l,useDataSources:d,onSettingChange:h}=t,{searchResultView:p,hint:S,resultMaxNumber:m,linkParam:x,isAutoSelectFirstResult:f}=r,[b,R]=a.React.useState(!1),[v,C]=a.React.useState(!1),[y,j]=a.React.useState(m),[w,E]=a.React.useState((0,a.Immutable)({}));a.React.useEffect((()=>{B()}),[r]);const B=()=>{const e={maxSuggestions:null==r?void 0:r.maxSuggestions,isUseCurrentLoation:null==r?void 0:r.isUseCurrentLoation,isShowRecentSearches:null==r?void 0:r.isShowRecentSearches,recentSearchesMaxNumber:null==r?void 0:r.recentSearchesMaxNumber};E((0,a.Immutable)(e))},k=(e,t)=>{h({id:l,config:r.setIn(e,t)})},I=e=>0===(null==e?void 0:e.length)||Number(e)&&Number(e)>0;return(0,a.jsx)(o.SettingSection,{title:s("generalSearchOption"),css:n},(0,a.jsx)(o.SearchGeneralSetting,{id:l,hint:S,onSettingChange:e=>{k(["hint"],e)}}),(0,a.jsx)("div",null,(0,a.jsx)(o.SettingSection,{className:"search-setting-con"},(0,a.jsx)(o.SettingRow,{role:"group","aria-label":s("searchSuggestion")},(0,a.jsx)(c.CollapsablePanel,{label:s("searchSuggestion"),isOpen:b,onRequestOpen:()=>{R(!0)},onRequestClose:()=>{R(!1)},level:1},(0,a.jsx)(o.SearchSuggestionSetting,{id:l,settingConfig:w,onSettingChange:e=>{if(!e)return!1;const t=r.merge(e);h({id:l,config:t})}})))),b&&(0,a.jsx)(o.SettingSection,{className:"divider-line"})),(0,a.jsx)(o.SettingRow,{role:"group","aria-label":s("searchResult")},(0,a.jsx)(c.CollapsablePanel,{label:s("searchResult"),isOpen:v,onRequestOpen:()=>{C(!0)},onRequestClose:()=>{C(!1)},level:1},(0,a.jsx)(o.SettingRow,{label:s("resultPanel"),className:"mt-2"},(0,a.jsx)(c.Switch,{title:s("resultPanel"),checked:p===e.ResultPanel,onChange:t=>{(t=>{const s=t?e.ResultPanel:e.OtherWidgets;k(["searchResultView"],s)})(p===e.OtherWidgets)}})),p===e.ResultPanel&&(0,a.jsx)(o.SettingRow,{flow:"wrap",className:"checkbox-con",label:s("maximumResults")},(0,a.jsx)(c.TextInput,{"aria-label":s("maximumResults"),size:"sm",value:y,onChange:e=>{const t=e.target.value;I(t)&&j(t)},onAcceptValue:e=>{e||j(e=m||6),I(e)&&k(["resultMaxNumber"],Number(e))},className:"w-100"})),p===e.ResultPanel&&(0,a.jsx)(o.SettingRow,null,(0,a.jsx)("div",{className:"cursor-pointer d-flex align-items-center",onClick:e=>{k(["isAutoSelectFirstResult"],!f)},"aria-label":s("autoSelect")},(0,a.jsx)(c.Checkbox,{checked:f,title:s("autoSelect"),className:"mr-1"}),(0,a.jsx)("span",{className:"check-box-label flex-grow-1 ml-1"},s("autoSelect")))),p===e.OtherWidgets&&(0,a.jsx)(o.SettingRow,{className:"d-block",flow:"wrap",label:s("redirectSearchResult")},(0,a.jsx)(o.LinkSelector,{onSettingConfirm:e=>{e&&k(["linkParam"],e)},linkParam:x,useDataSources:d,widgetId:l,hiddenLinks:(0,a.Immutable)([a.LinkType.WebAddress,a.LinkType.PrintPreview]),openTypes:(0,a.Immutable)([o.OpenTypes.CurrentWindow])})),p===e.ResultPanel&&(0,a.jsx)(g,{id:l,config:r,onSettingChange:h}))))},h=e=>{const{config:t,id:s,portalUrl:i,onSettingChange:r,useDataSources:l}=e,c=a.css`
    .suggestion-setting-con  {
      padding-bottom: 0;
    }
  `,A=e=>{var t;const s=[];return null===(t=null==e?void 0:e.datasourceConfig)||void 0===t||t.forEach((e=>{(null==e?void 0:e.searchServiceType)===o.SearchServiceType.GeocodeService&&s.push(null==e?void 0:e.useUtility)})),s};return(0,a.jsx)("div",{className:"widget-setting-search jimu-widget-search",css:c},(0,a.jsx)(o.SearchDataSetting,{id:s,portalUrl:i,useDataSources:l,createOutputDs:!0,onSettingChange:(e,i)=>{if(!e)return!1;const a=(0,n.getAppConfigAction)(),o=null==t?void 0:t.setIn(["datasourceConfig"],e);let r={id:s,config:o};(null==i?void 0:i.isWidgetJsonDsChanged)&&(null==i?void 0:i.dsInWidgetJson)&&(r=Object.assign(Object.assign({},r),null==i?void 0:i.dsInWidgetJson)),a.editWidget(r).exec()},onOutputDsSettingChange:(e,i,a)=>{if(!i)return!1;const o=null==t?void 0:t.setIn(["datasourceConfig"],i);let r={id:s,config:o,useUtilities:A(o)};(null==a?void 0:a.isWidgetJsonDsChanged)&&(null==a?void 0:a.dsInWidgetJson)&&(r=Object.assign(Object.assign({},r),null==a?void 0:a.dsInWidgetJson)),(0,n.getAppConfigAction)().editWidget(r,e).exec()},datasourceConfig:null==t?void 0:t.datasourceConfig,searchDataSettingType:o.SearchDataType.Both,enableFiltering:null==t?void 0:t.enableFiltering,onEnableFilteringChange:e=>{r({id:s,config:t.set("enableFiltering",e)})}}),(0,a.jsx)(d,{id:s,config:t,onSettingChange:r,useDataSources:l}))};function p(e){r.p=e}})(),l})())}}}));