System.register(["jimu-core","jimu-ui","jimu-theme"],(function(e,t){var o={},i={},l={};return{setters:[function(e){o.Immutable=e.Immutable,o.React=e.React,o.ReactRedux=e.ReactRedux,o.classNames=e.classNames,o.css=e.css,o.getAppStore=e.getAppStore,o.i18n=e.i18n,o.jsx=e.jsx,o.moduleLoader=e.moduleLoader},function(e){i.Icon=e.Icon,i.Tooltip=e.Tooltip},function(e){l.withBuilderTheme=e.withBuilderTheme}],execute:function(){e((()=>{var e={24359:(e,t,o)=>{var i={"./chart-area.svg":23659,"./chart-pie.svg":74958,"./chart.svg":93108,"./circle-double.svg":74874,"./circle.svg":53720,"./data-source.svg":76637,"./data.svg":97197,"./ellipse.svg":33802,"./grid.svg":45531,"./hexagon.svg":97709,"./image.svg":41210,"./layer.svg":63980,"./list.svg":30512,"./page.svg":19672,"./pentagon.svg":36927,"./pill.svg":24555,"./rectangle.svg":64986,"./rhombus.svg":2761,"./ring.svg":29704,"./square-border-rounded.svg":67660,"./square.svg":72180,"./triangle.svg":61403,"./widget.svg":50687};function l(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}l.keys=function(){return Object.keys(i)},l.resolve=s,e.exports=l,l.id=24359},23659:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 4.97V14H15v1H2a1 1 0 01-1-1V1h1v11.5l2.645-5a1 1 0 011.16-.47 1 1 0 01.39.225L8.1 9.524a.5.5 0 00.78-.017l3.724-4.842a.5.5 0 01.896.305z" fill="#000"></path></svg>'},74958:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.53 12.282A7.014 7.014 0 0015 7.972C15 4.39 12.328 1.433 8.875 1v6.609l4.655 4.673zm-1.238 1.242A6.952 6.952 0 018 15c-3.866 0-7-3.146-7-7.027C1 4.39 3.672 1.433 7.125 1v7.337l5.167 5.187z" fill="#000"></path></svg>'},93108:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.286 0h3.428v16H6.286V0zm6.285 4.571H16V16h-3.429V4.571zM3.43 9.143H0V16h3.429V9.143z" fill="#000"></path></svg>'},74874:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 8A6 6 0 112 8a6 6 0 0112 0zm1 0A7 7 0 111 8a7 7 0 0114 0zm-7 4a4 4 0 100-8 4 4 0 000 8z" fill="#000"></path></svg>'},53720:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 8A8 8 0 110 8a8 8 0 0116 0z" fill="#000"></path></svg>'},76637:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.8 0a2 2 0 00-2 2v2h14.4V2a2 2 0 00-2-2H2.8zm12.4 5.6H.8v4.8h14.4V5.6zM.8 12h14.4v2a2 2 0 01-2 2H2.8a2 2 0 01-2-2v-2zm4-10a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zm0 6a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zm-1.2 7.2a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4z" fill="#000"></path></svg>'},97197:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0c3.534 0 6.4 1.075 6.4 2.4v2.4c0 1.325-2.865 2.4-6.4 2.4S1.6 6.125 1.6 4.8V2.427a.92.92 0 010-.027C1.6 1.075 4.465 0 8 0zM1.6 6.774a.92.92 0 000 .053v2.374c0 1.325 2.866 2.4 6.4 2.4 3.535 0 6.4-1.075 6.4-2.4V6.8c0 1.325-2.865 2.4-6.4 2.4-3.534 0-6.4-1.075-6.4-2.4v-.027zm0 4.4a.914.914 0 000 .053V13.6C1.6 14.925 4.467 16 8 16c3.535 0 6.4-1.075 6.4-2.4v-2.4c0 1.325-2.865 2.4-6.4 2.4-3.534 0-6.4-1.075-6.4-2.4v-.027z" fill="#000"></path></svg>'},33802:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 8c0 3.314-3.582 6-8 6s-8-2.686-8-6 3.582-6 8-6 8 2.686 8 6z" fill="#000"></path></svg>'},45531:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 1h3v3H1V1zm5.5 0h3v3h-3V1zM15 1h-3v3h3V1zM1 6.5h3v3H1v-3zm8.5 0h-3v3h3v-3zm2.5 0h3v3h-3v-3zM4 12H1v3h3v-3zm2.5 0h3v3h-3v-3zm8.5 0h-3v3h3v-3z" fill="#000"></path></svg>'},97709:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0l6.929 4v8L8 16l-6.928-4V4L8 0z" fill="#000"></path></svg>'},41210:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.728 8.981L10.286 4 16 12H0l4.571-5.714L6.728 8.98z" fill="#000"></path></svg>'},63980:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.629 9.143L16 10.286 8 16l-8-5.714 1.371-1.143L8 13.714l6.629-4.571zM8 0l8 5.714-8 5.715-8-5.715L8 0z" fill="#000"></path></svg>'},30512:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 2H1v2h2V2zm0 5H1v2h2V7zm-2 5h2v2H1v-2zM15 2H5v2h10V2zM5 7h10v2H5V7zm10 5H5v2h10v-2z" fill="#000"></path></svg>'},19672:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4 14.4a1.6 1.6 0 01-1.6 1.6H3.2a1.6 1.6 0 01-1.6-1.6V1.6A1.6 1.6 0 013.2 0h4.6a1 1 0 011 1v3.6a1 1 0 001 1h3.6a1 1 0 011 1v7.8zM10.4 0v3a1 1 0 001 1h3l-4-4zm-4 8H12v1.6H6.4V8zm0 3.2H12v1.6H6.4v-1.6zm-.8.8A.8.8 0 114 12a.8.8 0 011.6 0zm-.8-2.4a.8.8 0 100-1.6.8.8 0 000 1.6z" fill="#000"></path></svg>'},36927:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0l7.608 5.528-2.906 8.944H3.298L.392 5.528 8 0z" fill="#000"></path></svg>'},24555:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1" y="4" width="14" height="8" rx="4" fill="#000"></rect></svg>'},64986:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 2h16v12H0V2z" fill="#000"></path></svg>'},2761:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0l8 8-8 8-8-8 8-8z" fill="#000"></path></svg>'},29704:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="6" stroke="#000" stroke-width="2"></circle></svg>'},67660:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H2v12h12V2zM2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2z" fill="#000"></path></svg>'},72180:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h16v16H0V0z" fill="#000"></path></svg>'},61403:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 1l8 14H0L8 1z" fill="#000"></path></svg>'},50687:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.667 4.667L11.333 0 16 4.667l-4.667 4.666-4.666-4.666zM0 1.333V8h6.667V1.333H0zM6.667 16H0V9.333h6.667V16zM8 16V9.333h6.667V16H8z" fill="#000"></path></svg>'},65603:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.022 11H1a1 1 0 01-1-1V1a1 1 0 011-1h9a1 1 0 011 1v4.022A5.5 5.5 0 115.022 11zm0-1A5.502 5.502 0 0110 5.022V1H1v9h4.022zm5.478 5a4.5 4.5 0 100-9 4.5 4.5 0 000 9z" fill="#000" fill-rule="nonzero"></path></svg>'},48891:e=>{"use strict";e.exports=o},34796:e=>{"use strict";e.exports=l},30726:e=>{"use strict";e.exports=i}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,s),l.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";s.r(a),s.d(a,{default:()=>p});var e,t,o=s(48891),i=s(30726);!function(e){e.ByUpload="BYUPLOAD",e.ByStaticUrl="BYSTATICURL",e.ByDynamicUrl="BYDYNAMICURL"}(e||(e={})),function(e){e.Expression="EXPRESSION",e.Attachment="ATTACHMENT",e.Symbol="SYMBOL"}(t||(t={}));const l={imageSource:"Image source",imageNoneSource:"None",staticSource:"Static",dynamicSource:"Dynamic",imageSet:"Select an image",toolTip:"Tooltip",altText:"Alt text",imageSetLink:"Set link",imageShape:"Shape",imagePosition:"Position",imageFit:"Fit",imageFill:"Fill",imageAttachment:"Attachment",imageCustom:"Custom",imageAttachmentName:"Attachment name",imageSymbol:"Symbol",imageSymbolScale:"Symbol scale",imagerectangle:"Rectangle/Square",imagecircle:"Oval/Circle",imagehexagon:"Hexagon",imagepentagon:"Pentagon",imagerhombus:"Rhombus",imagetriangle:"Triangle",imageShapeSettings:"Shape settings",imageUploadBlankStatus:'Click the "{ButtonString}" button to select an image from your device.',imageDisplayQuality:"Image display quality",displayQualityTooltipWithLow:"Low",displayQualityTooltipWithMedium:"Medium",displayQualityTooltipWithHigh:"High",displayQualityTooltipWithOriginal:"Original"};var n=s(34796);class r extends o.React.PureComponent{constructor(){super(...arguments),this.cropShapeList=["square","circle","hexagon","pentagon","rhombus","triangle"],this.shapeClick=(e,t)=>{if(this.props.widgetConfig.functionConfig.imageParam&&this.props.widgetConfig.functionConfig.imageParam.cropParam&&this.props.widgetConfig.functionConfig.imageParam.cropParam.cropShape===this.cropShapeList[t])return;const i=e.currentTarget.getElementsByTagName("svg")&&e.currentTarget.getElementsByTagName("svg")[0];if(i){const e=o.moduleLoader.getJimuForBuilderModules().getAppConfigAction();let l=(0,o.Immutable)(this.props.widgetConfig),s=(0,o.Immutable)(l.functionConfig.imageParam?l.functionConfig.imageParam.cropParam:null);s||(s=(0,o.Immutable)({})),s=s.set("svgViewBox",i.getAttribute("viewBox")),s=s.set("svgPath",i.getElementsByTagName("path")[0].getAttribute("d")),s=s.set("cropShape",this.cropShapeList[t]),l=l.setIn(["functionConfig","imageParam","cropParam"],s),e.editWidgetConfig(this.props.id,l).exec()}}}getStyle(){const e=this.props.theme;return o.css`
      .widget-image-chooseshape-item {
        background-color: ${e.colors.palette.light[300]};
      }

      .widget-image-chooseshape-item:hover {
        cursor: 'pointer';
        background-color: ${e.colors.palette.light[500]};
      }

      .chooseshape-item-selected {
        background-color: ${e.colors.palette.light[500]};
      }
      `}getTooltipStyle(){const e=this.props.theme;return o.css`
      border: none;

      .tooltip {
        color: ${e.colors.black};
        background-color: ${e.colors.palette.light[600]};
        border-color: ${e.colors.palette.light[300]};
      }
    `}render(){const{id:e,appConfig:t,theme:a,widgetConfig:n}=this.props,r=t.widgets[e],g=window.parent._widgetSettingManager.getSettingI18nMessagesByUri(r.uri);return(0,o.jsx)("div",{style:{width:"50px"},css:this.getStyle()},this.cropShapeList.map(((e,t)=>{var r,p,v,c;const h=s(24359)(`./${e}.svg`),d="square"===e?"imagerectangle":`image${e}`,m=null!==(r=g[d])&&void 0!==r?r:l[d],u="rectangle"===e&&!(null===(p=n.functionConfig.imageParam)||void 0===p?void 0:p.cropParam)||(null===(c=null===(v=n.functionConfig.imageParam)||void 0===v?void 0:v.cropParam)||void 0===c?void 0:c.cropShape)===e;return(0,o.jsx)(i.Tooltip,{key:t,title:m,placement:"right-start",css:this.getTooltipStyle()},(0,o.jsx)("div",{className:(0,o.classNames)("w-100 d-flex justify-content-center align-items-center widget-image-chooseshape-item",{"chooseshape-item-selected":u}),style:{height:"40px"},onClick:e=>this.shapeClick(e,t)},(0,o.jsx)(i.Icon,{icon:h,color:a.colors.black})))})))}}const g=(0,n.withBuilderTheme)(r);class p{constructor(){this.index=0,this.id="choose-shape",this.classes={},this.isEmptySource=e=>!(e.functionConfig.imageParam&&e.functionConfig.imageParam.url||e.functionConfig.srcExpression||e.functionConfig.dynamicUrlType===t.Attachment)}getGroupId(){return null}getTitle(){const e=this.widgetId,t=o.i18n.getIntl(e);return t?t.formatMessage({id:"imageChooseShape",defaultMessage:"Shape"}):"Shape"}getIcon(){return s(65603)}onClick(e){return null}visible(e){const t=(0,o.getAppStore)().getState().appConfig.widgets[e.layoutItem.widgetId];if(t){const e=t.config;return!this.isEmptySource(e)}return!1}getSettingPanel(e){const t=e.layoutItem.widgetId;return this.classes[t]||(this.classes[t]=o.ReactRedux.connect((e=>{const i=(0,o.Immutable)(e.appConfig.widgets[t].config);return{id:t,appConfig:e.appConfig,queryObject:e.queryObject,widgetConfig:i}}))(g)),this.classes[t]}}})(),a})())}}}));